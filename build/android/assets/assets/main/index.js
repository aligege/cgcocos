System.register("chunks:///_virtual/configuration.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var s,a,e,i,n;return{setters:[function(t){s=t.defineProperty},function(t){a=t.cclegacy,e=t._decorator,i=t.sys,n=t.log}],execute:function(){var o,r,c;a._RF.push({},"05c37maoztIcqYQxP8Afj1j","configuration",void 0);const{ccclass:h}=e;t("configuration",h("configuration")((c=r=class t{constructor(){s(this,"jsonData",null),s(this,"path",null),s(this,"KEY_CONFIG","CarConfig"),s(this,"markSave",!1),s(this,"saveTimer",-1)}static get instance(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}start(){let t;if(this.jsonData={userId:""},this.path=this.getConfigPath(),i.isNative){t=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]}else t=i.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1));try{const s=JSON.parse(t);this.jsonData=s}catch(t){}}this.saveTimer=setInterval((()=>{this.scheduleSave()}),500)}setConfigDataWithoutSave(t,s){const a=this.jsonData.userId;this.jsonData[a]?this.jsonData[a][t]=s:console.error("no account can not save")}setConfigData(t,s){this.setConfigDataWithoutSave(t,s),this.markSave=!0}getConfigData(t){const s=this.jsonData.userId;if(this.jsonData[s]){const a=this.jsonData[s][t];return a||""}return n("no account can not load"),""}setGlobalData(t,s){this.jsonData[t]=s,this.save()}getGlobalData(t){return this.jsonData[t]}setUserId(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()}getUserId(){return this.jsonData.userId}scheduleSave(){this.markSave&&this.save()}markModified(){this.markSave=!0}save(){let t=JSON.stringify(this.jsonData);if(this.markSave=!1,!i.isNative){return void i.localStorage.setItem(this.KEY_CONFIG,t)}const s={};s[this.KEY_CONFIG]=t,jsb.fileUtils.writeToFile(s,this.path)}getConfigPath(){const t=i.platform;let s="";return t===i.OS_WINDOWS?s="src/conf":t===i.OS_LINUX?s="./conf":i.isNative?(s=jsb.fileUtils.getWritablePath(),s+="conf"):s="src/conf",s}parseUrl(t){if(!t||"string"==typeof t&&t.length<=0)return;let s={};if("string"==typeof t){(t=t.split("?")[1]).split("&").forEach((function(t){const a=t.indexOf("=");if(-1!==a){const e=t.substring(0,a);s[e]=t.substring(a+1)}}))}else s=t;s.action&&this.setGlobalData("urlParams",s),s.source&&this.setGlobalData("source",s.source),s.adchannelid&&this.setGlobalData("adchannelid",s.adchannelid)}static generateGuestAccount(){return`${Date.now()}10`}},s(r,"_instance",void 0),o=c))||o);a._RF.pop()}}}));

System.register("chunks:///_virtual/carManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./poolManager.ts","./car.ts","./follow.ts","./roadPoint.ts","./localConfig.ts","./playerData.ts"],(function(t){"use strict";var e,a,n,i,r,o,s,h,l,c,C,g,p,m,f,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t._decorator,r=t.Component,o=t.Vec3,s=t.macro},function(t){h=t.fightConstants},function(t){l=t.clientEvent},function(t){c=t.resourceUtil},function(t){C=t.constant},function(t){g=t.poolManager},function(t){p=t.car},function(t){m=t.follow},function(t){f=t.roadPoint},function(t){u=t.localConfig},function(t){d=t.playerData}],execute:function(){var M,v,w,E,I;n._RF.push({},"0ab97H51jJALJr6aO9gzNGg","carManager",void 0);const{ccclass:y,property:_}=i;t("carManager",(M=y("carManager"),v=_({type:m}),M((I=e((E=class extends r{constructor(...t){super(...t),a(this,"followCamera",I,this)}start(){}onEnable(){l.on("showInvincible",this.showInvincible,this)}onDisable(){l.off("showInvincible",this.showInvincible,this)}showInvincible(){this.mainCar&&(this.mainCar.isInvincible=!0)}init(t,e){this._fightMap=t,this._customerManager=e,this.creatMainCar()}creatMainCar(){let t=d.instance.showCar?d.instance.showCar:C.INITIAL_CAR,e=u.instance.queryByID("car",t.toString()),a=e?e.model:C.MIN_CAR_ID;c.getCar(a,((t,e)=>{if(t)return void console.error(t);this.mainCar&&g.instance.putNode(this.mainCar.node);let a=g.instance.getNode(e,this.node);this.mainCar=a.getComponent("car"),this.mainCar.markMainCar(!0),this.mainCar.setEntry(this._fightMap.path[0]),this.mainCar.manager=this._customerManager,this.mainCar.maxProgress=this._fightMap.levelProgressCnt,this.mainCar.setMoveOverListener((()=>{})),this.followCamera.followTarget=a,this.followCamera.showStart()}))}preloadAICar(t){let e=[];for(let t=1;t<this._fightMap.path.length;t++){let a=this._fightMap.path[t].getComponent(f);if(a.type!==h.ROAD_POINT_TYPE.AI_START)return;let n=a.cars.split(",");for(let t=0;t<n.length;t++)-1===e.indexOf(n[t])&&e.push(n[t])}let a=0;c.getCarsBatch(e,(t=>{a++,a<=15&&l.dispatchEvent("updateLoading",2)}),(()=>{a<=15&&l.dispatchEvent("updateLoading",30-2*a),t&&t()}))}startGenerateEnemy(){this.genAICar=this.genAICar.bind(this);for(let t=1;t<this._fightMap.path.length;t++){this._fightMap.path[t].getComponent(f).startGenerateCar(this.genAICar)}}stopGenerateEnemy(){for(let t=1;t<this._fightMap.path.length;t++){this._fightMap.path[t].getComponent(f).stopGenerateCar()}}genAICar(t,e){c.getCar(e,((e,a)=>{if(e)return void console.error(e);let n=g.instance.getNode(a,this.node).getComponent("car");n.setEntry(t.node),n.minSpeed=t.carSpeed,n.maxSpeed=t.carSpeed,n.startRunning(),n.markMainCar(!1),n.setMoveOverListener((t=>{g.instance.putNode(t.node)}))}))}reset(){this.mainCar.setEntry(this._fightMap.path[0]),this.mainCar.maxProgress=this._fightMap.levelProgressCnt,this.followCamera.followTarget=this.mainCar.node,this.stopGenerateEnemy(),this.recycleAllAICar()}recycleAllAICar(){let t=[];this.node.children.forEach((e=>{t.push(e)}),this),t.forEach((t=>{let e=t.getComponent("car");e&&!e.isMain&&g.instance.putNode(t)}))}recycleLimitAICar(){let t=[];this.node.children.forEach((e=>{t.push(e)}),this),t.forEach((t=>{let e=t.getComponent("car"),a=o.distance(t.worldPosition,this.mainCar.node.worldPosition);e&&!e.isMain&&Math.abs(a)<=5?g.instance.putNode(t):(e.isOver=!1,e.startRunning())}))}controlMainCar(t){t?(l.dispatchEvent("showGuide",!1),this.mainCar.startRunning()):this.mainCar.stopRunning()}startGame(){l.dispatchEvent("showGuide",!0),this.mainCar.startWithMinSpeed(),this.startGenerateEnemy(),this.schedule(this.checkCarIsCloser,.2,s.REPEAT_FOREVER)}gameOver(){this.followCamera.followTarget=null,this.stopGenerateEnemy(),this.unschedule(this.checkCarIsCloser),this.node.children.forEach((t=>{t.getComponent(p).stopImmediately()}))}changeCameraFollowRotation(){this.followCamera.isFollowRotation=!this.followCamera.isFollowRotation}getCurrentProgress(){return{cur:this.mainCar.curProgress,isOver:!this.mainCar.hasCustomer}}revive(){this.recycleLimitAICar(),this.mainCar.revive(),this.followCamera.followTarget=this.mainCar.node,this.startGenerateEnemy()}checkCarIsCloser(){if(!this.mainCar.isCarMoving)return;let t=this.mainCar.node,e=t.getWorldPosition();this.node.children.forEach((a=>{if(a!==t){let t=a.getWorldPosition(),n=a.forward;t.x-=n.x,t.z-=n.z,Math.abs(t.x-e.x)<2&&Math.abs(t.z-e.z)<2&&a.getComponent(p).tooting()}}))}}).prototype,"followCamera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=E))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/eventListener.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,n,r,s,o;return{setters:[function(t){e=t.defineProperty},function(t){n=t.cclegacy,r=t._decorator,s=t.error,o=t.log}],execute:function(){var a,i;n._RF.push({},"10a09om3sZD8q2H50TLwLIc","eventListener",void 0);const{ccclass:l,property:c}=r;let p=l("oneToOneListener")(a=class{constructor(){e(this,"supportEvent",{}),e(this,"handle",{}),this.supportEvent=null}on(t,e,n){this.handle[t]={handler:e,target:n}}off(t,e){const n=this.handle[t];n&&n.handler&&n.handler===e&&delete this.handle[t]}dispatchEvent(t){if(null!==this.supportEvent&&!this.supportEvent.hasOwnProperty(t))return void s("please add the event into clientEvent.js");const e=this.handle[t],n=[];for(let t=1;t<arguments.length;t++)n.push(arguments[t]);e.handler?e.handler.apply(e.target,n):o("not register "+t+"    callback func")}setSupportEventList(t){if(!(t instanceof Array))return s("supportEvent was not array"),!1;this.supportEvent={};for(let e in t){const n=t[e];this.supportEvent[n]=e}return!0}})||a;t("eventListener",l("eventListener")(i=class{static getBaseClass(t){return p}})||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/oneToMultiListener.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,r,n,s;return{setters:[function(t){e=t.defineProperty},function(t){r=t.cclegacy,n=t._decorator,s=t.error}],execute:function(){var o,i,a;r._RF.push({},"10a25g6TDNP2IICdF4Htopx","oneToMultiListener",void 0);const{ccclass:l}=n;t("oneToMultiListener",l("oneToMultiListener")((a=i=class{static on(t,e,r){const n={handler:e,target:r};let s=this.handlers[t];s||(s=[],this.handlers[t]=s);for(var o=0;o<s.length;o++)if(!s[o])return s[o]=n,o;return s.push(n),s.length}static off(t,e,r){const n=this.handlers[t];if(n)for(let t=0;t<n.length;t++){const s=n[t];if(s.handler===e&&(!r||r===s.target)){n.splice(t,1);break}}}static dispatchEvent(t,...e){const r=this.handlers[t];let n;for(n=1;n<arguments.length;n++);if(r)for(n=0;n<r.length;n++){const t=r[n];t.handler&&t.handler.apply(t.target,e)}}static setSupportEventList(t){if(!(t instanceof Array))return s("supportEvent was not array"),!1;this.supportEvent={};for(let e in t){const r=t[e];this.supportEvent[r]=e}return!0}},e(i,"handlers",void 0),e(i,"supportEvent",void 0),o=a))||o);r._RF.pop()}}}));

System.register("chunks:///_virtual/shop.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./poolManager.ts","./util.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./shopPage.ts","./gameLogic.ts","./LanguageData.ts"],(function(e){"use strict";var t,n,r,i,a,o,s,l,c,u,h,p,g,f,d,C,b,I,P,m,y,B,D,G,_;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,r=e.defineProperty},function(e){i=e.cclegacy,a=e.Label,o=e.Node,s=e.Prefab,l=e.Sprite,c=e._decorator,u=e.Component,h=e.instantiate,p=e.Vec3,g=e.Button,f=e.Color},function(e){d=e.clientEvent},function(e){C=e.resourceUtil},function(e){b=e.constant},function(e){I=e.poolManager},function(e){P=e.util},function(e){m=e.localConfig},function(e){y=e.playerData},function(e){B=e.uiManager},function(e){D=e.shopPage},function(e){G=e.gameLogic},function(e){_=e.i18n}],execute:function(){var w,E,R,S,T,A,Y,U,k,x,L,N,O,v,z,H,M,F,$,V,W,q,j,K,X,J,Q,Z,ee;i._RF.push({},"15effXNtKpGeLctODlTRqhl","shop",void 0);const{ccclass:te,property:ne}=c;e("shop",(w=te("shop"),E=ne(a),R=ne(o),S=ne(o),T=ne(o),A=ne(o),Y=ne(a),U=ne(a),k=ne(a),x=ne(o),L=ne(o),N=ne(s),O=ne(l),v=ne(a),w((M=t((H=class extends u{constructor(...e){super(...e),n(this,"lbGold",M,this),n(this,"nodeGet",F,this),n(this,"nodeGold",$,this),n(this,"nodeBuy",V,this),n(this,"nodeGo",W,this),n(this,"lbDesc",q,this),n(this,"lbPrice",j,this),n(this,"lbGo",K,this),n(this,"nodeCarParent",X,this),n(this,"nodePages",J,this),n(this,"pfPage",Q,this),n(this,"spCarBlack",Z,this),n(this,"lbPage",ee,this),r(this,"currentPage",null),r(this,"currentCar",null),r(this,"carDegree",0),r(this,"rotateSpeed",30),r(this,"currentCarInfo",void 0),r(this,"pageIndex",0),r(this,"maxPage",0),r(this,"currentCarID",0)}start(){}onEnable(){d.on("updateGold",this.updateGold,this),d.on("onShopItemSelect",this.onShopItemSelect,this),d.on("updateBuyTask",this.updateButtons,this)}onDisable(){d.off("updateGold",this.updateGold,this),d.off("onShopItemSelect",this.onShopItemSelect,this),d.off("updateBuyTask",this.updateButtons,this)}show(){let e=m.instance.getCars();this.maxPage=Math.floor(e.length/9),this.updateGold(),this.showPage()}showPage(){this.currentPage||(this.currentPage=h(this.pfPage),this.currentPage.parent=this.nodePages,this.pageIndex=0,this.refreshPageLabel(),this.currentPage.getComponent(D).setPage(this.pageIndex)),this.currentPage.getComponent(D).show()}updateGold(){let e=y.instance.playerInfo.gold||0;this.lbGold.string=P.formatMoney(e)}onBtnCloseClick(){B.instance.hideDialog("shop/shop")}getCar(){G.buyCar(this.currentCarInfo.ID);let e={rewardType:b.REWARD_TYPE.CAR,amount:1,ID:this.currentCarInfo.ID};B.instance.showDialog("common/showReward",[e,!1,"购买成功",()=>{G.useCar(this.currentCarInfo.ID),this.currentPage.getComponent(D).refreshUse(this.currentCarInfo.ID)},null,"确认"])}onBtnGetClick(){let e=this.currentCarInfo.ID;if(!y.instance.hasCar(e))if(this.currentCarInfo.type===b.BUY_CAR_TYPE.GOLD){if(this.currentCarInfo.num>y.instance.playerInfo.gold)return void B.instance.showTips("获取金币",(()=>{}));G.addGold(-this.currentCarInfo.num),this.getCar()}else{if(y.instance.getBuyTypeProgress(this.currentCarInfo.type)>=this.currentCarInfo.num)this.getCar();else switch(this.currentCarInfo.type){case b.BUY_CAR_TYPE.GAME:case b.BUY_CAR_TYPE.LOGIN:case b.BUY_CAR_TYPE.CONTINUOUS_LOGIN:case b.BUY_CAR_TYPE.PASS_LEVEL:this.onBtnCloseClick();break;case b.BUY_CAR_TYPE.SIGNIN:this.onBtnCloseClick(),B.instance.showDialog("signIn/signIn");break;case b.BUY_CAR_TYPE.SHARE:G.openReward(b.SHARE_FUNCTION.SHOP_SHARE,((e,t)=>{}));break;case b.BUY_CAR_TYPE.VIDEO:G.openReward(b.SHARE_FUNCTION.SHOP_VIDEO,((e,t)=>{}))}}}checkBtn(){}onBtnGoldClick(){G.openReward(b.SHARE_FUNCTION.SHOP_VIDEO,(e=>{e||G.showFlyReward(b.REWARD_TYPE.GOLD,(()=>{G.addGold(300),this.updateButtons()}))}))}onShopItemSelect(e,t){let n=this.currentPage.getComponent(D);n.unSelectAll(),t&&n.unUseAll(),this.currentCar&&(I.instance.putNode(this.currentCar),this.currentCar=null),this.currentCarInfo=m.instance.queryByID("car",e.toString()),this.currentCarInfo.type===b.BUY_CAR_TYPE.SHARE&&(this.currentCarInfo.type=b.BUY_CAR_TYPE.GOLD,this.currentCarInfo.num=2e3),y.instance.hasCar(e)?(this.spCarBlack.node.active=!1,C.getUICar(this.currentCarInfo.model,((e,t)=>{e?console.error(e,this.currentCarInfo.model):(this.carDegree=0,this.currentCar=I.instance.getNode(t,this.nodeCarParent))}))):(this.spCarBlack.node.active=!0,C.setCarIcon(this.currentCarInfo.model,this.spCarBlack,!0,(()=>{}))),this.updateButtons()}update(e){this.currentCar&&(this.carDegree-=e*this.rotateSpeed,this.carDegree<=-360&&(this.carDegree+=360),this.currentCar.eulerAngles=new p(0,this.carDegree,0))}updateButtons(){if(y.instance.hasCar(this.currentCarInfo.ID))this.lbDesc.string="",this.nodeGo.active=!0,this.nodeBuy.active=!1,this.lbGo.string="获取",this.nodeGet.getComponent(g).interactable=!0;else if(this.currentCarInfo.type===b.BUY_CAR_TYPE.GOLD)this.lbDesc.string="",this.lbPrice.string=this.currentCarInfo.num,y.instance.playerInfo.gold>=this.currentCarInfo.num?(this.lbPrice.color=f.WHITE,this.nodeGet.getComponent(g).interactable=!0):(this.lbPrice.color=f.RED,this.nodeGet.getComponent(g).interactable=!0),this.nodeGo.active=!1,this.nodeBuy.active=!0;else{this.nodeGet.getComponent(g).interactable=!0,this.nodeGo.active=!0,this.nodeBuy.active=!1;let e=y.instance.getBuyTypeProgress(this.currentCarInfo.type);e<this.currentCarInfo.num?this.lbGo.string="前往商店":this.lbGo.string="获取";let t=_.t(`carTask.${this.currentCarInfo.show}`);this.currentCarInfo.type!==b.BUY_CAR_TYPE.SIGNIN&&(t+=`(${_.t("shop.current")}：${e}/${this.currentCarInfo.num})`),this.lbDesc.string=t}}refreshPageLabel(){this.lbPage.string=`${this.pageIndex+1}/${this.maxPage+1}`}onBtnLeftClick(){const e=this.currentPage.getComponent(D);this.pageIndex>0?this.pageIndex--:this.pageIndex=this.maxPage,this.refreshPageLabel(),e.setPage(this.pageIndex),e.show()}onBtnRightClick(){const e=this.currentPage.getComponent(D);this.pageIndex>=this.maxPage?this.pageIndex=0:this.pageIndex++,this.refreshPageLabel(),e.setPage(this.pageIndex),e.show()}}).prototype,"lbGold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(H.prototype,"nodeGet",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(H.prototype,"nodeGold",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(H.prototype,"nodeBuy",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(H.prototype,"nodeGo",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(H.prototype,"lbDesc",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(H.prototype,"lbPrice",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(H.prototype,"lbGo",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(H.prototype,"nodeCarParent",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(H.prototype,"nodePages",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(H.prototype,"pfPage",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(H.prototype,"spCarBlack",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=t(H.prototype,"lbPage",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=H))||z));i._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(E){"use strict";var I,N;return{setters:[function(E){I=E.defineProperty},function(E){N=E.cclegacy}],execute:function(){N._RF.push({},"1ad87mpTDFDV7de0xMwTCq4","constant",void 0);class _{}E("constant",_),I(_,"GAME_NAME","car"),I(_,"LOCAL_CACHE",{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"}),I(_,"MAX_LEVEL",20),I(_,"MIN_CAR_ID",101),I(_,"MAX_CAR_ID",109),I(_,"AUDIO_SOUND",{BACKGROUND:"background",CRASH:"crash",GET_MONEY:"getMoney",IN_CAR:"inCar",NEW_ORDER:"newOrder",CAR_START:"carStart",WIN:"win",STOP:"stop",TOOTING1:"tooting1",TOOTING2:"tooting2"}),I(_,"SIGNIN_REWARD_STATUS",{RECEIVED:0,RECEIVABLE:1,UNRECEIVABLE:2,FILL_SIGNIN:3,AFTER_FILL_SIGNIN:4}),I(_,"MAX_SIGNIN_DAY",7),I(_,"NORMAL_SHOW_TIME",3),I(_,"NEWBEE_LEVEL",2),I(_,"REWARD_TYPE",{DIAMOND:1,GOLD:2,CAR:3}),I(_,"ONLINE",{MAX_TIME:60,PROFIT_PER_SECOND:.3,TIME_PER_CIRCLE:10}),I(_,"SHARE_FUNCTION",{BALANCE:"balance",RELIVE:"relive",OFFLINE:"offline",RANK:"rank",LOTTERY:"lottery",LOTTERY_REWARD:"lotteryReward",TRIAL:"trial",CLICK_BOX:"clickBox",ONLINE:"online",SIGNIN:"signIn",FILL_SIGNIN:"fillSignIn",INVINCIBLE:"invincible",SHOP_SHARE:"shopShare",SHOP_VIDEO:"shopVideo"}),I(_,"INITIAL_CAR",1),I(_,"BUY_CAR_TYPE",{GOLD:1,LOGIN:2,CONTINUOUS_LOGIN:3,SHARE:4,VIDEO:5,GAME:6,INVITE:7,SIGNIN:8,PASS_LEVEL:9}),I(_,"OPEN_REWARD_TYPE",{AD:0,SHARE:1,NULL:2}),I(_,"GOLD_REWARD",{SECOND:500,SEVENT:500}),I(_,"LOTTERY",{MONEY:2e3,EXCHANGE:500}),I(_,"CUSTOMER_MAX_CNT",2),I(_,"MENU_INIT_BOTTOM",40),I(_,"MENU_BOTTOM",250),N._RF.pop()}}}));

System.register("chunks:///_virtual/polyglot.min.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,r;return{setters:[function(n){t=n.defineProperty},function(n){r=n.cclegacy}],execute:function(){n("polyglot",(function(n){return new y(n)})),r._RF.push({},"26839JcVWpGabE9xA7/uWJw","polyglot.min",void 0);var e=function(n,t,r){if(n=arguments[0],t="function"==typeof arguments[1]?arguments[1]:new Function,Array.isArray(n))n.forEach(((n,r,e)=>{t(n,r)}));else for(const r in n)if(n.hasOwnProperty(r)){const e=n[r];t(e,r)}},i=function(n,t){return n.hasOwnProperty(t)};var s=function(n){!function(n){console.warn(n)}(n)},o=String.prototype.replace,a=String.prototype.split,u="||||",l=function(n){var t=n%100,r=t%10;return 11!==t&&1===r?0:2<=r&&r<=4&&!(t>=12&&t<=14)?1:2},c={pluralTypes:{arabic:function(n){if(n<3)return n;var t=n%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:l,chinese:function(){return 0},croatian:l,french:function(n){return n>1?1:0},german:function(n){return 1!==n?1:0},russian:l,lithuanian:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=9&&(n%100<11||n%100>19)?1:2},czech:function(n){return 1===n?0:n>=2&&n<=4?1:2},polish:function(n){if(1===n)return 0;var t=n%10;return 2<=t&&t<=4&&(n%100<10||n%100>=20)?1:2},icelandic:function(n){return n%10!=1||n%100==11?1:0},slovenian:function(n){var t=n%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function h(n,t){var r=function(n){var t={};return e(n,(function(n,r){e(n,(function(n){t[n]=r}),this)}),this),t}(n.pluralTypeToLanguages);return r[t]||r[a.call(t,/-/,1)[0]]||r.en}function f(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var p=/%\{(.*?)\}/g;function g(n,t,r,e,s){if("string"!=typeof n)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return n;var l=n,f=e||p,g=s||c,y="number"==typeof t?{smart_count:t}:t;if(null!=y.smart_count&&l){var v=a.call(l,u);l=(v[function(n,t,r){return n.pluralTypes[h(n,t)](r)}(g,r||"en",y.smart_count)]||v[0]).replace(/^\s+|\s+$/gm,"")}return l=o.call(l,f,(function(n,t){return i(y,t)&&null!=y[t]?y[t]:n}))}class y{static transformPhrase(n,t,r){return g(n,t,r)}constructor(n){t(this,"phrases",{}),t(this,"pluralRules",{}),t(this,"currentLocale",""),t(this,"onMissingKey",null),t(this,"warn",null),t(this,"tokenRegex",void 0);var r=n||{};this.extend(r.phrases||{}),this.currentLocale=r.locale||"en";var e=r.allowMissing?g:null;this.onMissingKey="function"==typeof r.onMissingKey?r.onMissingKey:e,this.warn=r.warn||s,this.tokenRegex=function(n){var t=n&&n.prefix||"%{",r=n&&n.suffix||"}";if(t===u||r===u)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(f(t)+"(.*?)"+f(r),"g")}(r.interpolation),this.pluralRules=r.pluralRules||c}has(n){return i(this.phrases,n)}t(n,t){var r,e,i=null==t?{}:t;if("string"==typeof this.phrases[n])r=this.phrases[n];else if("string"==typeof i._)r=i._;else if(this.onMissingKey){e=(0,this.onMissingKey)(n,i,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+n+'"'),e=n;return"string"==typeof r&&(e=g(r,i,this.currentLocale,this.tokenRegex,this.pluralRules)),e}replace(n){this.clear(),this.extend(n)}clear(){this.phrases={}}locale(n){return n&&(this.currentLocale=n),this.currentLocale}extend(n,t){var r=this;e(n,(function(n,e){var i=t?t+"."+e:e;"object"==typeof n?r.extend(n,i):r.phrases[i]=n}),this)}unset(n,t){"string"==typeof n?delete this.phrases[n]:e(n,(function(n,r){var e=t?t+"."+r:r;"object"==typeof n?this.unset(n,e):delete this.phrases[e]}),this)}}n("Polyglot",y),r._RF.pop()}}}));

System.register("chunks:///_virtual/fightMap.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./clientEvent.ts","./resourceUtil.ts","./poolManager.ts","./roadPoint.ts","./LanguageData.ts"],(function(e){"use strict";var t,i,s,r,n,o,l,a,h,c,p,d,g,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,s=e.defineProperty},function(e){r=e.cclegacy,n=e.Node,o=e._decorator,l=e.Component,a=e.Vec3},function(e){h=e.fightConstants},function(e){c=e.clientEvent},function(e){p=e.resourceUtil},function(e){d=e.poolManager},function(e){g=e.roadPoint},function(e){u=e.i18n}],execute:function(){var f,M,P,m,y;r._RF.push({},"273adkVLRhECoDje+nCdBuE","fightMap",void 0);const{ccclass:b,property:v}=o;e("fightMap",(f=b("fightMap"),M=v({type:n,displayName:"各路线起点"}),f((y=t((m=class extends l{constructor(...e){super(...e),i(this,"path",y,this),s(this,"_progressListener",void 0),s(this,"_completeListener",void 0),s(this,"curProgress",0),s(this,"maxProgress",0),s(this,"levelProgressCnt",0)}buildMap(e,t,i){this._progressListener=t,this._completeListener=i,this.objMap=e,this.curProgress=0,this.maxProgress=6,this.buildModel("plane"),this.buildModel("road"),this.buildModel("tree"),this.buildModel("house"),this.buildModel("sign"),this.buildPath()}buildModel(e){if(!this.objMap.hasOwnProperty(e))return void this.triggerFinished(e);let t=[],i=this.objMap[e];for(let e=0;e<i.children.length;e++){let s=i.children[e].name;-1===t.indexOf(s)&&t.push(s)}let s={};p.getMapObjs(e,t,(()=>{}),((t,r)=>{if(t)return void console.error(t);for(let e=0;e<r.length;e++){let t=r[e];s[t.data.name]=t}let o=new n(e);o.parent=this.node,o.setPosition(new a(i.pX,i.pY,i.pZ));for(let e=0;e<i.children.length;e++){let t=i.children[e],r=s[t.name],n=d.instance.getNode(r,o);n.setPosition(t.pX,t.pY,t.pZ),n.eulerAngles=new a(t.rX,t.rY,t.rZ),n.setScale(t.sX,t.sY,t.sZ)}this.triggerFinished(e)}))}buildPath(){if(!this.objMap.hasOwnProperty("path"))return;this.path=[],this.levelProgressCnt=0;let e=this.objMap.path,t=new n("path");t.parent=this.node,t.setPosition(e.pX,e.pY,e.pZ);for(let i=0;i<e.children.length;i++){let s=e.children[i],r=new n(s.name);r.parent=t,r.setPosition(s.pX,s.pY,s.pZ);let o=this.createRoadPoint(s.path,r);o&&this.path.push(o)}this.triggerFinished("path")}createRoadPoint(e,t){if(!e)return null;let i=new n(e.name);i.parent=t,i.setPosition(e.pX,e.pY,e.pZ),i.setScale(e.sX,e.sY,e.sZ),i.eulerAngles=new a(e.rX,e.rY,e.rZ);let s=i.addComponent(g);return s.type=e.type,s.moveType=e.moveType,s.clockwise=e.clockwise,s.direction=e.direction,s.delayTime=e.delayTime,s.genInterval=e.genInterval,s.carSpeed=e.carSpeed,s.cars=e.cars,s.type===h.ROAD_POINT_TYPE.PLATFORM&&this.levelProgressCnt++,e.next&&(s.next=this.createRoadPoint(e.next,t)),i}triggerFinished(e){console.log(`build ${e} finished!`);let t="";switch(e){case"plane":t=u.t("fightMap.trimTheGround");break;case"road":t=u.t("fightMap.pavingTheRoad");break;case"tree":t=u.t("fightMap.plantingTree");break;case"house":t=u.t("fightMap.decorateHouse");break;case"sign":t=u.t("fightMap.paintLandmarks")}t&&c.dispatchEvent("updateLoading",10,t),this.curProgress++,this._progressListener&&this._progressListener(this.curProgress,this.maxProgress),this.curProgress>=this.maxProgress&&this._completeListener&&this._completeListener()}recycle(){console.log("recycle map elements..."),this.recycleModel("plane"),this.recycleModel("road"),this.recycleModel("tree"),this.recycleModel("house"),this.recycleModel("sign"),this.node.removeAllChildren()}recycleModel(e){let t=this.node.getChildByName(e);if(t)for(let e=0;e<t.children.length;e++){let i=t.children[e];d.instance.putNode(i)}}}).prototype,"path",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=m))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./SpriteFrameSet.ts"],(function(e){"use strict";var t,i,r,s,n,p,a,o,c;return{setters:[function(e){t=e.defineProperty,i=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){s=e.cclegacy,n=e._decorator,p=e.Component,a=e.Sprite,o=e.error},function(e){c=e.default}],execute:function(){var l,u,d,h,m,S,f;s._RF.push({},"28bd9xEMv1GKLbTuAi4B4dI","LocalizedSprite",void 0);const{ccclass:F,property:g}=n;e("default",(l=F("LocalizedSprite"),u=g({type:[c],displayOrder:1}),l((f=S=class extends p{constructor(...e){super(...e),t(this,"sprite",null),r(this,"spriteFrameSet",m,this)}onLoad(){this.fetchRender()}fetchRender(){let e=this.getComponent(a);if(e)return this.sprite=e,void this.updateSprite(window.i18nConfig.curLang)}getSpriteFrameByLang(e){for(let t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame}updateSprite(e){if(!this.sprite)return void o("Failed to update localized sprite, sprite component is invalid!");let t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),t&&(this.sprite.spriteFrame=t)}},t(S,"editor",{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"}),m=i((h=f).prototype,"spriteFrameSet",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),d=h))||d));s._RF.pop()}}}));

System.register("chunks:///_virtual/shopItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./poolManager.ts","./playerData.ts"],(function(e){"use strict";var t,n,s,i,r,a,o,c,u,h,l,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty,s=e.defineProperty},function(e){i=e.cclegacy,r=e.Node,a=e.Sprite,o=e._decorator,c=e.Component},function(e){u=e.clientEvent},function(e){h=e.resourceUtil},function(e){l=e.poolManager},function(e){p=e.playerData}],execute:function(){var d,f,I,C,y,D,b,m,v,g,S;i._RF.push({},"2b1f3615PZNnqYSDTVo5tI8","shopItem",void 0);const{ccclass:k,property:B}=o;e("shopItem",(d=k("shopItem"),f=B(r),I=B(r),C=B(r),y=B(a),d((m=t((b=class extends c{constructor(...e){super(...e),n(this,"nodeSelect",m,this),n(this,"nodeUsed",v,this),n(this,"nodeRedDot",g,this),n(this,"spCarIcon",S,this),s(this,"currentCar",null),s(this,"carInfo",{ID:0,type:0,num:0,model:""})}start(){}onEnable(){u.on("buyCar",this.refreshCarIcon,this),u.on("updateBuyTask",this.updateBuyTask,this)}onDisable(){u.off("buyCar",this.refreshCarIcon,this),u.off("updateBuyTask",this.updateBuyTask,this)}refreshCarIcon(){this.carInfo&&(h.setCarIcon(this.carInfo.model,this.spCarIcon,!p.instance.hasCar(this.carInfo.ID),(()=>{})),this.updateBuyTask())}updateBuyTask(){if(p.instance.hasCar(this.carInfo.ID))this.nodeRedDot.active=!1;else{let e=p.instance.getBuyTypeProgress(this.carInfo.type);this.nodeRedDot.active=e>=this.carInfo.num}}show(e){this.carInfo=e,this.select=!1,this.nodeUsed.active=!1,this.currentCar&&(l.instance.putNode(this.currentCar),this.currentCar=null),e?(this.spCarIcon.node.active=!0,this.refreshCarIcon(),this.carInfo.ID===p.instance.getCurrentCar()&&this.scheduleOnce((()=>{this.onItemClick(!1)}),0)):this.spCarIcon.node.active=!1}set select(e){this.nodeSelect.active=e}get select(){return this.nodeSelect.active}set used(e){this.nodeUsed.active=e}get used(){return this.nodeUsed.active}onItemClick(e=!0){if(!this.carInfo)return;let t=p.instance.hasCar(this.carInfo.ID);u.dispatchEvent("onShopItemSelect",this.carInfo.ID,t),this.select=!0,t&&(this.used=!0,p.instance.useCar(this.carInfo.ID),u.dispatchEvent("updateCar"))}updateUseState(){this.used=this.carInfo.ID===p.instance.getCurrentCar()}}).prototype,"nodeSelect",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"nodeUsed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"nodeRedDot",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(b.prototype,"spCarIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=b))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/online.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./util.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var t,i,r,n,s,l,o,a,c,u,h,f,p,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.defineProperty},function(e){n=e.cclegacy,s=e.Sprite,l=e.Label,o=e._decorator,a=e.Component},function(e){c=e.clientEvent},function(e){u=e.constant},function(e){h=e.util},function(e){f=e.playerData},function(e){p=e.uiManager},function(e){g=e.gameLogic}],execute:function(){var m,d,T,E,P,R,b,I,L;n._RF.push({},"349acC5lWBNyZL7loxYm/uD","online",void 0);const{ccclass:O,property:M}=o;e("online",(m=O("online"),d=M(s),T=M(s),E=M(l),m((b=t((R=class extends a{constructor(...e){super(...e),i(this,"spTimeProgress",b,this),i(this,"perTimeProgress",I,this),i(this,"lbGold",L,this),r(this,"currentTime",0),r(this,"isOverflow",!1),r(this,"currentGold",0)}start(){}onEnable(){this.refresh()}refresh(){this.currentTime=0,this.perTimeProgress.fillRange=0;let e=f.instance.getLastOnlineRewardTime(),t=Math.floor((f.instance.getCurrentTime()-e)/1e3);t=t>0?t:0,t=t<u.ONLINE.MAX_TIME?t:u.ONLINE.MAX_TIME,this.isOverflow=t===u.ONLINE.MAX_TIME,this.currentGold=Math.floor(t*u.ONLINE.PROFIT_PER_SECOND),this.lbGold.string=h.formatMoney(this.currentGold);let i=t/u.ONLINE.MAX_TIME;i=i>1?1:i,this.spTimeProgress.fillRange=i}clear(){this.currentGold=0,this.lbGold.string="0",this.spTimeProgress.fillRange=0,f.instance.updateLastOnlineRewardTime(this.currentTime),this.isOverflow=!1}onBtnOnlineClick(){if(this.currentGold<=0)return;this.spTimeProgress.fillRange>=.5?p.instance.showDialog("main/onlineDouble",[this.currentGold,()=>{this.clear()}]):(f.instance.updatePlayerInfo("gold",this.currentGold),g.showFlyReward(u.REWARD_TYPE.GOLD,(()=>{c.dispatchEvent("updateGold")})),this.clear())}update(e){if(!this.isOverflow)if(this.currentTime+=e,this.currentTime>u.ONLINE.TIME_PER_CIRCLE)this.refresh();else{let e=this.currentTime/u.ONLINE.TIME_PER_CIRCLE;this.perTimeProgress.fillRange=e}}}).prototype,"spTimeProgress",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"perTimeProgress",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(R.prototype,"lbGold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=R))||P));n._RF.pop()}}}));

System.register("chunks:///_virtual/shopPage.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./shopItem.ts"],(function(e){"use strict";var t,o,n,s,i,r,c,l,a,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty,n=e.defineProperty},function(e){s=e.cclegacy,i=e.Prefab,r=e._decorator,c=e.Component,l=e.instantiate},function(e){a=e.localConfig},function(e){p=e.shopItem}],execute:function(){var h,u,f,g,d;s._RF.push({},"35980PVGZdO6o5scEE8kciy","shopPage",void 0);const{ccclass:m,property:P}=r;e("shopPage",(h=m("shopPage"),u=P(i),h((d=t((g=class extends c{constructor(...e){super(...e),o(this,"pfShopItem",d,this),n(this,"page",0)}start(){}setPage(e){this.page=e}show(){let e=a.instance.getCars(),t=9*this.page,o=9*(this.page+1),n=0;for(let s=t;s<o;s++,n++){let t=null;n<this.node.children.length?t=this.node.children[n]:(t=l(this.pfShopItem),t.parent=this.node),t.getComponent(p).show(e[s])}}unSelectAll(){this.node.children.forEach((e=>{e.getComponent(p).select=!1}))}unUseAll(){this.node.children.forEach((e=>{e.getComponent(p).used=!1}))}refreshUse(e){this.node.children.forEach((t=>{let o=t.getComponent(p);o.carInfo.ID===e&&o.onItemClick()}))}}).prototype,"pfShopItem",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/zh.ts",["cc"],(function(){"use strict";var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"3c2acsRBE9KO4h4sGTiBlRL","zh",void 0),window.i18nConfig||(window.i18nConfig={}),window.i18nConfig.languages||(window.i18nConfig.languages={}),window.i18nConfig.languages.zh={main:{dataLoading:"数据加载中...",dataLoadOver:"数据加载完成...",loginSuccess:"登录成功...",gameResourceLoading:"游戏资源加载中...",audioResourceLoading:"音效资源加载中...",mappingResourceLoading:"贴图资源加载中...",modelResourceLoading:"模型资源加载中...",entering:"正在进入..."},mainUI:{start:"点击屏幕开始",changeCar:"换车"},shop:{btnClose:"关闭",go:"前往",acquired:"已获得",current:"当前",receive:"领取",getGold:"看广告可获取金币"},balance:{"你完成了%{value}个订单":"你完成了%{value}个订单",youEarnedIt:"你赚到了",clickReceive:"点击领取",receiveImmediately:"立即领取"},carTask:{"初始车辆":"初始车辆","分享获得":"分享获得","签到获得":"签到获得","通过关卡获得":"通过关卡获得"},signin:{title:"七日登录",notYet:"暂不领取",normalReceive:"普通领取",receive:"领取",doubleReceive:"双倍领取",fillSignin:"补签"},fightManager:{loadingMap:"正在加载地图...",buildingCity:"开始建造城市...",cityLoadOver:"城市加载完毕..."},fightMap:{trimTheGround:"正在修整地面...",pavingTheRoad:"正在铺路中...",plantingTree:"正在栽树中...",decorateHouse:"正在装修房屋中...",paintLandmarks:"正在粉刷地标中..."},online:{close:"关闭",clickReceive:"点击领取",dailyIncome:"日常收益可领取"},lottery:{title:"幸运大转盘",free:"免费"},talk:{"你好,请到街对面接我.":"你好,请到街对面接我.","停车!停车!":"停车!停车!","去消费最高的地方.":"去消费最高的地方.","去附近的希尔顿酒店.":"去附近的希尔顿酒店.","司机快来!我老婆要生了!":"司机快来!我老婆要生了!","大哥快点,我赶时间.":"大哥快点,我赶时间.","师傅,5分钟内能到吗?":"师傅,5分钟内能到吗?","师傅,你是老司机嘛?":"师傅,你是老司机嘛?","师傅,你跑一天能赚多少?":"师傅,你跑一天能赚多少?","师傅快点,我要赶飞机.":"师傅快点,我要赶飞机.","师傅跟上那辆法拉利.":"师傅跟上那辆法拉利.","带我去最近的银行.":"带我去最近的银行.","帮我跟上前面那辆车!":"帮我跟上前面那辆车!","快去火车站,我赶车!":"快去火车站,我赶车!","我在酒店大堂门口等你.":"我在酒店大堂门口等你.","要下雨了,你快来!":"要下雨了,你快来!"},showReward:{title:"奖励",normalReceive:"普通领取",ReceiveImmediately:" 立即领取",doubleReceive:"双倍领取",alreadyHadCar:"您已拥有该车辆，自动转成对应金币",buySuccessful:"购买成功",confrim:"确认",signinReward:"签到奖励"},revive:{reviveImmediately:"立即复活",skip:"跳过",tips:"真可惜，只差一点就到终点了!",continue:"复活继续"},clickBox:{title:"神秘大礼",progress:"点击越快奖励越多",clickMe:"快点我",normalReceive:"普通领取",doubleReceive:"双倍领取"},trial:{title:"免费试用",tryItNow:"立即试用",giveUp:"放弃试用, 开始游戏"},invinceible:{title:"无敌开局",confirm:"确认",close:"关闭"},setting:{title:"设置",version:"版本号:",close:"关闭"}},e._RF.pop()}}}));

System.register("chunks:///_virtual/updateValueLabel.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var i,s,e,a,l;return{setters:[function(t){i=t.defineProperty},function(t){s=t.cclegacy,e=t.Label,a=t._decorator,l=t.Component}],execute:function(){var r;s._RF.push({},"4b7cfRS5bdP8qo8rorNgln5","updateValueLabel",void 0);const{ccclass:n,property:h,requireComponent:u}=a;t("updateValueLabel",n("updateValueLabel")(r=u(e)(r=class extends l{constructor(...t){super(...t),i(this,"isPlaying",!1),i(this,"startVal",0),i(this,"endVal",0),i(this,"diffVal",0),i(this,"currTime",0),i(this,"changingTime",0),i(this,"label",null)}start(){}playUpdateValue(t,i,s){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=s,this.label=this.node.getComponent(e),this.label.string=t.toString(),this.isPlaying=!0}update(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.label.string=`${i}`)}this.label.string=`${this.endVal}`,this.isPlaying=!1}}})||r)||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./configuration.ts","./audioManager.ts","./localConfig.ts","./uiManager.ts","./gameLogic.ts","./LanguageData.ts"],(function(i){"use strict";var t,e,n,s,o,r,c,a,u,l,h,p,g,S,f;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty,n=i.defineProperty},function(i){s=i.cclegacy,o=i.Sprite,r=i.SpriteFrame,c=i.Label,a=i._decorator,u=i.Component},function(i){l=i.configuration},function(i){h=i.audioManager},function(i){p=i.localConfig},function(i){g=i.uiManager},function(i){S=i.gameLogic},function(i){f=i.i18n}],execute:function(){var b,d,m,w,O,C,V,y,M,F,k,v,z;s._RF.push({},"501ddLP5JZNPaa02x+rFKAH","setting",void 0);const{ccclass:D,property:L}=a;i("setting",(b=D("setting"),d=L(o),m=L(o),w=L(r),O=L(r),C=L(c),b((M=t((y=class extends u{constructor(...i){super(...i),e(this,"spVibrateSwitch",M,this),e(this,"spSoundSwitch",F,this),e(this,"imgSwitchOpen",k,this),e(this,"imgSwitchClose",v,this),e(this,"lbVersion",z,this),n(this,"isSoundOpen",void 0),n(this,"isVibrateOpen",void 0),n(this,"clickTimes",0)}static checkState(){h.instance.getConfiguration(!0)?(h.instance.openMusic(),h.instance.openSound()):(h.instance.closeMusic(),h.instance.closeSound())}start(){}show(){this.clickTimes+=1,this.lbVersion.string=`${f.t("setting.version")} ${p.instance.getVersion()}`,this.isSoundOpen=h.instance.getConfiguration(!0),this.isVibrateOpen=S.isVibrateOpen(),this.refreshSwitchUI()}refreshSwitchUI(){this.isVibrateOpen?this.spVibrateSwitch.spriteFrame=this.imgSwitchOpen:this.spVibrateSwitch.spriteFrame=this.imgSwitchClose,this.isSoundOpen?this.spSoundSwitch.spriteFrame=this.imgSwitchOpen:this.spSoundSwitch.spriteFrame=this.imgSwitchClose}onBtnVibrateClick(){}onBtnSoundClick(){this.isSoundOpen=!this.isSoundOpen,this.isSoundOpen?(h.instance.openMusic(),h.instance.openSound()):(h.instance.closeMusic(),h.instance.closeSound()),l.instance.setGlobalData("music",`${this.isSoundOpen}`),this.refreshSwitchUI()}onBtnCloseClick(){g.instance.hideDialog("main/setting")}}).prototype,"spVibrateSwitch",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(y.prototype,"spSoundSwitch",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(y.prototype,"imgSwitchOpen",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"imgSwitchClose",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(y.prototype,"lbVersion",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=y))||V));s._RF.pop()}}}));

System.register("chunks:///_virtual/customerManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./clientEvent.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts","./poolManager.ts"],(function(t){"use strict";var e,s,o,n,r,i,l,u,a,c,d,h,m,C,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty,o=t.defineProperty},function(t){n=t.cclegacy,r=t._decorator,i=t.Component,l=t.Vec3,u=t.Animation,a=t.isValid},function(t){c=t.fightConstants},function(t){d=t.clientEvent},function(t){h=t.resourceUtil},function(t){m=t.audioManager},function(t){C=t.constant},function(t){g=t.poolManager}],execute:function(){var p,_,f;n._RF.push({},"586a8tdaBhPQprl2rcvzztA","customerManager",void 0);const{ccclass:M,property:v}=r;t("customerManager",M("customerManager")((f=e((_=class extends i{constructor(...t){super(...t),s(this,"moveSpeed",f,this),o(this,"nodeCustomer",null),o(this,"_targetPos",null),o(this,"_callback",void 0),o(this,"_offset",null),o(this,"customerId",-1),o(this,"retryTimes",0)}start(){}newOrder(){this.customerId=Math.floor(Math.random()*C.CUSTOMER_MAX_CNT)+1,d.dispatchEvent("showTalk",this.customerId,c.CUSTOMER_TALK_TIME.NEW_ORDER)}greeting(t,e,s){-1===this.customerId&&(this.customerId=Math.floor(Math.random()*C.CUSTOMER_MAX_CNT)+1),this.nodeCustomer&&(g.instance.putNode(this.nodeCustomer),this.nodeCustomer=null),h.getCustomer(this.customerId.toString(),((o,n)=>{if(o)return console.error(o),void(this.retryTimes<3&&this.greeting(t,e,s));this.retryTimes=0,this.nodeCustomer=g.instance.getNode(n,this.node),this.nodeCustomer.active=!0;let r=new l;l.multiplyScalar(r,e,1.3),l.add(r,t,r);let i=r.clone();l.multiplyScalar(r,e,.25),l.add(r,t,r);let u=r.clone();this.nodeCustomer.setWorldPosition(i),0!==e.x?e.x>0?this.nodeCustomer.eulerAngles=new l(0,270,0):this.nodeCustomer.eulerAngles=new l(0,90,0):e.z>0?this.nodeCustomer.eulerAngles=new l(0,180,0):this.nodeCustomer.eulerAngles=new l(0,0,0),m.instance.playSound(C.AUDIO_SOUND.NEW_ORDER),this.customerMove(u,(()=>{m.instance.playSound(C.AUDIO_SOUND.IN_CAR),s&&s(),this.scheduleOnce((()=>{d.dispatchEvent("showTalk",this.customerId,c.CUSTOMER_TALK_TIME.INTO_THE_CAR)}),1)}))}))}takeCustomer(t,e,s,o){if(!this.nodeCustomer)return void(o&&o());e=new l(e.x,e.y,e.z);let n=new l;l.multiplyScalar(n,e,.25),l.add(n,t,n);let r=n.clone();this.nodeCustomer.active=!0,this.nodeCustomer.setWorldPosition(r),0!==e.x?e.x>0?this.nodeCustomer.eulerAngles=new l(0,90,0):this.nodeCustomer.eulerAngles=new l(0,270,0):e.z>0?this.nodeCustomer.eulerAngles=new l(0,0,0):this.nodeCustomer.eulerAngles=new l(0,180,0),l.multiplyScalar(n,e,1.3),l.add(n,t,n);let i=n.clone();m.instance.playSound(C.AUDIO_SOUND.GET_MONEY),this.customerMove(i,(()=>{o&&o(),s||this.scheduleOnce((()=>{this.newOrder()}),2)}))}customerMove(t,e){this._targetPos=t,this._callback=e,this.nodeCustomer.getComponent(u).play("walk"),this._offset=l.subtract(new l,this._targetPos,this.nodeCustomer.worldPosition),this._offset.multiplyScalar(this.moveSpeed)}update(t){if(this._targetPos&&this.nodeCustomer){let e=this.nodeCustomer.getWorldPosition(),s=new l;l.multiplyScalar(s,this._offset,t),e.add(s),l.subtract(s,e,this._targetPos).lengthSqr()<.01?this.onMoveOver():this.nodeCustomer.setWorldPosition(e)}}onMoveOver(){this.nodeCustomer.setWorldPosition(this._targetPos),this.nodeCustomer.active=!1,this._targetPos=null,this._callback&&this._callback()}reset(){if(this.nodeCustomer&&a(this.nodeCustomer)){this.nodeCustomer.getComponent(u).getState("walk").stop(),this.nodeCustomer.destroy(),this.nodeCustomer=null}this.customerId=-1}}).prototype,"moveSpeed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),p=_))||p);n._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./oneToMultiListener.ts"],(function(e){"use strict";var t,n,c,s;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy,c=e._decorator},function(e){s=e.oneToMultiListener}],execute:function(){var r,i,o;n._RF.push({},"5a305zVBk5GUIdzJLbOwV+H","clientEvent",void 0);const{ccclass:l,property:u}=c;e("clientEvent",l("clientEvent")((o=i=class extends s{},t(i,"handlers",{}),r=o))||r);n._RF.pop()}}}));

System.register("chunks:///_virtual/onlineDouble.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./util.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var t,n,i,o,l,r,a,s,c,u,p,d,b,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.defineProperty,i=e.initializerDefineProperty},function(e){o=e.cclegacy,l=e.Label,r=e.Sprite,a=e._decorator,s=e.Component},function(e){c=e.clientEvent},function(e){u=e.constant},function(e){p=e.util},function(e){d=e.playerData},function(e){b=e.uiManager},function(e){h=e.gameLogic}],execute:function(){var f,y,g,w,D,m,v,M,C;o._RF.push({},"5b356wyJ3BCYZpADXUOyafo","onlineDouble",void 0);const{ccclass:N,property:G}=a;e("onlineDouble",(f=N("onlineDouble"),y=G(l),g=G(l),w=G(r),f((v=t((m=class extends s{constructor(...e){super(...e),n(this,"rewardMoney",0),n(this,"overCallback",null),i(this,"lbGoldNormal",v,this),i(this,"lbGoldMulti",M,this),i(this,"spIcon",C,this)}start(){}show(e,t){this.rewardMoney=e,this.overCallback=t,this.lbGoldNormal.string=p.formatMoney(e),this.lbGoldMulti.string=p.formatMoney(3*e),h.updateRewardIcon(u.SHARE_FUNCTION.ONLINE,this.spIcon)}onBtnGetNormalClick(){this.rewardOver(this.rewardMoney)}onBtnGetMultiClick(){h.openReward(u.SHARE_FUNCTION.ONLINE,(e=>{e||this.rewardOver(3*this.rewardMoney)}))}rewardOver(e){d.instance.updatePlayerInfo("gold",e),b.instance.hideDialog("main/onlineDouble"),h.showFlyReward(u.REWARD_TYPE.GOLD,(()=>{c.dispatchEvent("updateGold")})),this.overCallback&&this.overCallback()}onBtnCloseClick(){b.instance.hideDialog("main/onlineDouble")}}).prototype,"lbGoldNormal",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(m.prototype,"lbGoldMulti",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(m.prototype,"spIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=m))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/trial.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./poolManager.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,r,n,i,a,o,c,s,l,u,h,p,g,d,C,f,b,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,n=t.defineProperty},function(t){i=t.cclegacy,a=t.Node,o=t.Widget,c=t.Sprite,s=t._decorator,l=t.Component,u=t.Vec3},function(t){h=t.clientEvent},function(t){p=t.resourceUtil},function(t){g=t.constant},function(t){d=t.poolManager},function(t){C=t.localConfig},function(t){f=t.playerData},function(t){b=t.uiManager},function(t){I=t.gameLogic}],execute:function(){var D,y,m,_,w,k,v,M,R;i._RF.push({},"5bf756By5JOmoKbG0aoUzq6","trial",void 0);const{ccclass:B,property:N}=s;t("trial",(D=B("trial"),y=N(a),m=N(o),_=N(c),D((v=e((k=class extends l{constructor(...t){super(...t),r(this,"nodeCarParent",v,this),r(this,"wgMenu",M,this),n(this,"currentCar",null),n(this,"carDegree",0),n(this,"rotateSpeed",30),n(this,"carId",0),r(this,"spIcon",R,this),n(this,"_callback",void 0)}start(){}show(t){this._callback=t,I.updateRewardIcon(g.SHARE_FUNCTION.TRIAL,this.spIcon),this.currentCar&&(d.instance.putNode(this.currentCar),this.currentCar=null);let e=C.instance.getCars(),r=[];if(e.forEach((t=>{f.instance.hasCar(t.ID)||r.push(t.ID)})),r.length<=0)return void this.onBtnCloseClick();let n=Math.floor(Math.random()*r.length);this.carId=r[n];let i=C.instance.queryByID("car",this.carId.toString());p.getUICar(i.model,((t,e)=>{t?console.error(t,i.model):(this.carDegree=0,this.currentCar=d.instance.getNode(e,this.nodeCarParent))}))}onBtnCloseClick(){b.instance.hideDialog("main/trial"),this._callback&&this._callback()}onBtnTrialClick(){I.openReward(g.SHARE_FUNCTION.TRIAL,((t,e)=>{t||(f.instance.showCar=this.carId,h.dispatchEvent("updateCar"),this.onBtnCloseClick())}))}update(t){this.currentCar&&(this.carDegree-=t*this.rotateSpeed,this.carDegree<=-360&&(this.carDegree+=360),this.currentCar.eulerAngles=new u(0,this.carDegree,0))}}).prototype,"nodeCarParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(k.prototype,"wgMenu",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(k.prototype,"spIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=k))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(t){"use strict";var e,i,s,n,o,r,c,a,p,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,s=t.defineProperty},function(t){n=t.cclegacy,o=t.Label,r=t._decorator,c=t.Component,a=t.Vec3,p=t.UITransform,l=t.isValid,u=t.tween},function(t){h=t.poolManager}],execute:function(){var d,g,f,b,w;n._RF.push({},"60f49uw4/dA4rGh/C738U1T","tips",void 0);const{ccclass:y,property:P}=r;t("tips",(d=y("tips"),g=P(o),d((w=e((b=class extends c{constructor(...t){super(...t),i(this,"lbTips",w,this),s(this,"targetPos",void 0)}start(){}show(t,e){this.targetPos=new a(0,200,0),this.node.setPosition(this.targetPos),this.lbTips.string=t;let i=this.lbTips.node.getComponent(p).contentSize;if(!l(i))return void h.instance.putNode(this.node);this.node.getComponent(p).setContentSize(i.width+100<240?240:i.width+100,i.height+30),this.scheduleOnce((()=>{u(this.targetPos).by(.8,new a(0,150,0)).call((()=>{e&&e(),h.instance.putNode(this.node)})).start()}),.8)}}).prototype,"lbTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/flyRewardItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,a,o,s,n,r,i;return{setters:[function(t){e=t.defineProperty},function(t){a=t.cclegacy,o=t._decorator,s=t.Component,n=t.Vec3,r=t.Sprite,i=t.tween}],execute:function(){var l;a._RF.push({},"62dd66o/TBEyqhX8gZkE8/G","flyRewardItem",void 0);const{ccclass:h,property:c}=o;t("flyRewardItem",h("flyRewardItem")(l=class extends s{constructor(...t){super(...t),e(this,"targetPos",new n),e(this,"targetRotation",new n(0,0,0)),e(this,"targetScale",new n(1,1,1)),e(this,"posLast",new n),e(this,"_callback",null)}start(){}show(t,e,a){this.posLast.set(e),this._callback=a;let o=this.node.addComponent(r);o.trim=!1,o.sizeMode=r.SizeMode.RAW,o.spriteFrame=t,this.node.eulerAngles=new n(0,0,Math.floor(360*Math.random())),this.targetRotation=new n(this.node.eulerAngles);let s=new n(Math.floor(300*Math.random())-150,Math.floor(300*Math.random())-150,0),l=n.distance(s,new n(0,0,0))/400;i(this.targetPos).to(l,s,{easing:"cubicInOut"}).start();let h=120+Math.floor(60*Math.random());h=this.targetRotation.z+Math.floor(2*Math.random())===1?h:-h,i(this.targetRotation).to(l,new n(0,0,h)).start(),i(this.targetScale).to(2*l/3,new n(1.4,1.4,1.4)).to(l/3,new n(1,1,1)).call((()=>{this.move2Target()})).start()}move2Target(){let t=n.distance(this.node.position,this.posLast)/1500,e=Math.floor(10*Math.random())/10;i(this.targetScale).to(.3,new n(1.4,1.4,1.4)).to(.7,new n(1,1,1)).union().repeat(50).start(),this.scheduleOnce((()=>{i(this.targetPos).to(t,this.posLast).call((()=>{this._callback&&this._callback(this.node)})).start()}),e)}update(t){this.node.position=this.targetPos,this.node.eulerAngles=this.targetRotation,this.node.setScale(this.targetScale)}})||l);a._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,n,r;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy,r=e._decorator}],execute:function(){var i;n._RF.push({},"64d5aR01mZIArZ14oqSxdz0","csvManager",void 0);const{ccclass:s}=r,o=[",",";","\t","|","^"],l=["\r\n","\r","\n"],c=function(e,t,n,r){return n instanceof Array?"number"===n[t]?Number(r[t]):"boolean"===n[t]?"true"===r[t]||"t"===r[t]||"1"===r[t]:r[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===r[t]||"t"===r[t]||"1"===r[t]:r[t]:Number(r[t])},u={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:o[0],newline:l[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,opts:{},assign:function(...e){Array.prototype.slice.call(arguments);const t=e[0],n=e.slice(1);for(let e=0,r=n.length;e<r;e++)for(const r in n[e])t[r]=n[e][r];return t},map:function(e,t){const n=[];for(let r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);return n},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:1},buildObjectConstructor:function(e,t,n){return function(r){const i={},s=function(e,t){return i[e]=t};return n?e.forEach(((e,i)=>{s(e,c(t[i],i,n,r))})):e.forEach(((e,n)=>{s(e,c(t[n],n,null,r))})),i}},buildArrayConstructor:function(e,t,n){return function(r){const i=new Array(t.length),s=function(e,t){return i[e]=t};return n?e.forEach((function(e,i){s(e,c(t[i],i,n,r))})):e.forEach((function(e,n){s(e,c(t[n],n,null,r))})),i}},frequency:function(e,t,n){void 0===n&&(n=!1);let r=0,i=0;const s=this.getLimit(n,e.length);for(;i<s&&(i=e.indexOf(t,i),-1!==i);)i+=1,r++;return r},mostFrequent:function(e,t,n){let r="";for(let i=t.length-1;i>=0;i--)this.frequency(e,t[i],n)>0&&(r=t[i]);return r||t[0]},unsafeParse:function(e,t,n){const r=e.split(t.newline);let i,s;function o(e){let n=e.shift();if(n.indexOf('"')>=0){let r=0,i=0,s=0;for(;e.length>0&&(r=n.indexOf('"',i),-1!==r||s%2!=0);)-1!==r?(i=r+1,s++):n=n+t.newline+e.shift();const o=[];let l,c=0,u=0,h=0;const a=n.length;for(let e in n){if(!n.hasOwnProperty(e))continue;let r=parseInt(e);const i=n[e];0===r&&'"'===i&&(c++,u=1),'"'===i&&(c++,n[r-1]===t.delimiter&&u===r&&u++),'"'===i&&c%2==0&&(n[r+1]!==t.delimiter&&r+1!==a||(h=r,l=n.substring(u,h),o.push(l),u=h+2,h=u)),i===t.delimiter&&c%2==0&&(h=r,h>u?(l=n.substring(u,h),o.push(l),u=h+1,h=u):h===u&&(o.push(""),u=h+1,h=u))}return h=a,h>=u&&(l=n.substring(u,h),o.push(l)),o}return n.split(t.delimiter)}for(t.skip>0&&r.splice(t.skip),t.header?(!0===t.header?(t.comment=o(r),t.cast=o(r),i=o(r)):"Array"===this.getType(t.header)&&(i=t.header),s=this.buildObjectConstructor(i,r[0].split(t.delimiter),t.cast)):s=this.buildArrayConstructor(i,r[0].split(t.delimiter),t.cast);r.length>0;){const e=o(r);e.length>1&&n(s(e),i[0])}return!0},safeParse:function(e,t){const n=t.newline,r=e.split(n);return t.skip>0&&r.splice(t.skip),!0},encodeCells:function(e,t,n){const r=e.slice(0);for(let e=0,i=r.length;e<i;e++)-1!==r[e].indexOf(this.quoteMark)&&(r[e]=r[e].replace(this.quoteRegex,this.doubleQuoteMark)),-1===r[e].indexOf(t)&&-1===r[e].indexOf(n)||(r[e]=this.quoteMark+r[e]+this.quoteMark);return r.join(t)},encodeArrays:function(e,t,n){const r=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,r,i));for(let s=0,o=this.getLimit(t.limit,e.length);s<o;s++)n(this.encodeCells(e[s],r,i));return!0},encodeObjects:function(e,t,n){const r=t.delimiter,i=t.newline;let s=[],o=[];for(const t in e[0])s.push(t),o.push(e[0][t]);!0===t.header?n(this.encodeCells(s,r,i)):"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,r,i)),n(this.encodeCells(o,r,"\n"));for(let l=1,c=this.getLimit(t.limit,e.length);l<c;l++){o=[];for(let t=0,n=s.length;t<n;t++)o.push(e[l][s[t]]);n(this.encodeCells(o,r,i))}return!0},parse:function(e,t,n){let r=[];if("Function"===this.getType(t)?(n=t,t={}):"Function"!==this.getType(n)&&(n=r.push.bind(r)),t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){const n=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,o,0!==n),t.newline=t.newline||this.mostFrequent(e,l,0!==n)}return this.unsafeParse(e,t,n)&&(!(r.length>0)||r)},encode:function(e,t,n){let r=[];return"Function"===this.getType(t)?n=t:"Function"!==this.getType(n)&&(r=[],n=r.push.bind(r)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,n)&&(!(r.length>0)||r.join(t.newline))}};e("csvManager",s("csvManager")(i=class{constructor(){t(this,"csvTables",{}),t(this,"csvTableForArr",{}),t(this,"tableCast",{}),t(this,"tableComment",{})}addTable(e,t,n){if(this.csvTables[e]&&!n)return;const r={},i=[];u.parse(t,{header:!0},((e,t)=>{r[e[t]]=e,i.push(e)})),this.tableCast[e]=u.opts.cast,this.tableComment[e]=u.opts.comment,this.csvTables[e]=r,this.csvTableForArr[e]=i}getTableArr(e){return this.csvTableForArr[e]}getTable(e){return this.csvTables[e]}queryOne(e,t,n){const r=this.getTable(e);if(!r)return null;if(!t)return r[n];for(const e in r)if(r.hasOwnProperty(e)&&r[e][t]===n)return r[e]}queryByID(e,t){return this.queryOne(e,null,t)}queryAll(e,t,n){const r=this.getTable(e);if(!r||!t)return null;const i={};for(const e in r)r.hasOwnProperty(e)&&r[e][t]===n&&(i[e]=r[e]);return i}queryIn(e,t,n){const r=this.getTable(e);if(!r||!t)return null;const i={},s=Object.keys(r),o=s.length;for(let e=0;e<o;e++){const o=r[s[e]];n.indexOf(o[t])>-1&&(i[s[e]]=o)}return i}queryByCondition(e,t){if(t.constructor!==Object)return null;const n=this.getTable(e);if(!n)return null;const r={},i=Object.keys(n),s=i.length,o=Object.keys(t),l=o.length;for(let e=0;e<s;e++){const s=n[i[e]];let c=!0;for(let n=0;n<l;n++){const l=o[n];c=c&&t[l].indexOf(s[l])>-1&&!r[i[e]]}c&&(r[i[e]]=s)}return r}})||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/mainUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./util.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,n,i,a,o,s,r,l,c,h,d,u,p,g,C,f,I,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.defineProperty},function(t){a=t.cclegacy,o=t.Sprite,s=t.Label,r=t.Node,l=t._decorator,c=t.Component,h=t.Vec3,d=t.tween},function(t){u=t.clientEvent},function(t){p=t.constant},function(t){g=t.util},function(t){C=t.localConfig},function(t){f=t.playerData},function(t){I=t.uiManager},function(t){b=t.gameLogic}],execute:function(){var v,S,w,y,D,G,m,R,B,E,k,L,x,P,_;a._RF.push({},"6e662xQs9xPfZ4Gn7vNo4u5","mainUI",void 0);const{ccclass:z,property:F}=l;t("mainUI",(v=z("mainUI"),S=F(o),w=F(s),y=F(r),D=F(r),G=F(r),m=F(r),v((E=e((B=class extends c{constructor(...t){super(...t),n(this,"spIcon",E,this),n(this,"lbGold",k,this),n(this,"nodeBtnService",L,this),n(this,"nodeSignInRedDot",x,this),n(this,"nodeGoldIcon",P,this),n(this,"nodeShopRedDot",_,this),i(this,"targetScale",new h(1,1,1)),i(this,"isGoldPlaying",!1),i(this,"arrCars",[]),i(this,"isShowAniFinished",!1),i(this,"debugIdx",0),i(this,"debugTimer",0)}start(){b.afterLogin(),this.updateSignIn()}onEnable(){u.on("updateGold",this.updateGold,this),u.on("updateSignIn",this.updateSignIn,this),u.on("receiveGold",this.receiveGold,this),u.on("updateCar",this.updateCar,this),u.on("buyCar",this.updateCarReceived,this)}onDisable(){u.off("updateGold",this.updateGold,this),u.off("updateSignIn",this.updateSignIn,this),u.off("receiveGold",this.receiveGold,this),u.off("updateCar",this.updateCar,this),u.off("buyCar",this.updateCarReceived,this)}updateGold(){let t=f.instance.playerInfo.gold||0;this.lbGold.string=g.formatMoney(t)}receiveGold(){this.isGoldPlaying=!0,this.nodeGoldIcon.setScale(new h(1,1,1)),d(this.targetScale).to(.2,new h(1.2,1.2,1.2)).to(.2,new h(1,1,1)).call((()=>{this.isGoldPlaying=!1})).start()}updateSignIn(){f.instance.updateSignInCurrentDay();let t=f.instance.getSignInReceivedInfo();this.nodeSignInRedDot.active=!t.isAllReceived}onBtnBgClick(){f.instance.playerInfo.level>p.NEWBEE_LEVEL?I.instance.showDialog("main/trial",[()=>{this.askInvincible()}]):this.showStart()}askInvincible(){f.instance.playerInfo.level>p.NEWBEE_LEVEL?I.instance.showDialog("main/invincible",[()=>{this.showStart()}]):this.showStart()}showStart(){u.dispatchEvent("startGame")}onBtnDailyClick(){I.instance.showDialog("signIn/signIn")}onBtnLotteryClick(){I.instance.showDialog("lottery/lottery")}onBtnRankClick(){I.instance.showDialog("rank/rank")}onBtnChangeCarClick(){I.instance.showDialog("shop/shop")}onBtnSettingClick(){I.instance.showDialog("main/setting")}updateCar(){}updateCarReceived(){this.nodeShopRedDot.active=f.instance.hasCarCanReceived()}onBtnLeftClick(){let t=f.instance.showCar,e=this.arrCars.indexOf(t);e--,e<0&&(e=this.arrCars.length-1),f.instance.showCar=this.arrCars[e],u.dispatchEvent("updateCar")}onBtnRightClick(){let t=f.instance.showCar,e=this.arrCars.indexOf(t);e++,e>=this.arrCars.length&&(e=0),f.instance.showCar=this.arrCars[e],u.dispatchEvent("updateCar")}show(){this.updateGold(),this.nodeShopRedDot.active=f.instance.hasCarCanReceived(),this.arrCars.length=0,C.instance.getCars().forEach((t=>{this.arrCars.push(t.ID)})),this.isShowAniFinished=!0,b.updateRewardIcon(p.SHARE_FUNCTION.TRIAL,this.spIcon,(()=>{f.instance.hasCar(f.instance.showCar)&&(this.spIcon.node.active=!1)})),f.instance.isComeFromBalance&&this.onBtnBgClick()}update(t){(this.isGoldPlaying||1!==this.targetScale.x)&&this.nodeGoldIcon.setScale(this.targetScale)}onBtnDebugClick(){}}).prototype,"spIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(B.prototype,"lbGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(B.prototype,"nodeBtnService",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(B.prototype,"nodeSignInRedDot",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(B.prototype,"nodeGoldIcon",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(B.prototype,"nodeShopRedDot",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=B))||R));a._RF.pop()}}}));

System.register("chunks:///_virtual/showReward.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./poolManager.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts","./LanguageData.ts"],(function(e){"use strict";var t,i,n,r,a,s,l,o,c,u,h,d,p,b,w,m,f,g,R,y,D;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,n=e.defineProperty},function(e){r=e.cclegacy,a=e.SpriteFrame,s=e.Sprite,l=e.Label,o=e.Node,c=e.Animation,u=e._decorator,h=e.Component,d=e.Vec3},function(e){p=e.clientEvent},function(e){b=e.resourceUtil},function(e){w=e.constant},function(e){m=e.poolManager},function(e){f=e.localConfig},function(e){g=e.playerData},function(e){R=e.uiManager},function(e){y=e.gameLogic},function(e){D=e.i18n}],execute:function(){var I,T,C,E,v,P,B,A,_,N,k,z,S,L,G,W,Y,F,M,O,H,U,V,q,x;r._RF.push({},"880e1kClIdKPqdXdgTIpdv2","showReward",void 0);const{ccclass:j,property:K}=u;e("showReward",(I=j("showReward"),T=K(a),C=K(s),E=K(l),v=K(l),P=K(l),B=K(l),A=K(o),_=K(o),N=K(o),k=K(o),z=K(c),I((G=t((L=class extends h{constructor(...e){super(...e),i(this,"sfGold",G,this),i(this,"spIcon",W,this),i(this,"lbRewardValue",Y,this),i(this,"lbTips",F,this),i(this,"lbTitle",M,this),i(this,"lbImmediateBtn",O,this),i(this,"ndCarParent",H,this),i(this,"ndBtnDouble",U,this),i(this,"ndBtnNormal",V,this),i(this,"ndBtnImmediately",q,this),i(this,"aniReward",x,this),n(this,"isDouble",!1),n(this,"callback",null),n(this,"isLast",!1),n(this,"rewardType",0),n(this,"amount",0),n(this,"itemInfo",void 0),n(this,"_isHadCar",!1),n(this,"currentCar",null),n(this,"carDegree",0),n(this,"rotateSpeed",30)}start(){}show(e,t,i,n,r,a){this.itemInfo=e,this.rewardType=e.rewardType,this.amount=e.amount,this.ndBtnDouble.active=t,this.ndBtnNormal.active=t,this.ndBtnImmediately.active=!t,this.lbTitle.string=i,this.lbRewardValue.string=e.rewardType===w.REWARD_TYPE.CAR?"":String(this.amount),this.callback=n,r?(this.lbTips.node.active=!0,this.lbTips.string=r):this.lbTips.node.active=!1,this.showRewardPage(),this.aniReward.play("rewardShow"),this.aniReward.once(c.EventType.FINISHED,(()=>{this.aniReward.play("rewardIdle")}),this),this.lbImmediateBtn.string=a||D.t("balance.receiveImmediately")}showRewardPage(){switch(this.currentCar&&(m.instance.putNode(this.currentCar),this.currentCar=null),this.rewardType){case w.REWARD_TYPE.DIAMOND:break;case w.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.spIcon.node.active=!0;break;case w.REWARD_TYPE.CAR:this.spIcon.node.active=!1;let e=f.instance.queryByID("car",this.itemInfo.ID).model;b.getUICar(e,((e,t)=>{e?console.error(e):(this.currentCar=m.instance.getNode(t,this.ndCarParent),this.carDegree=0)}))}}onBtnNormalClick(){this.addReward()}onBtnDoubleClick(){y.openReward(w.SHARE_FUNCTION.SIGNIN,(e=>{e||(this.amount*=2,this.addReward())}))}onBtnImmediatelyClick(){this.addReward()}addReward(){switch(this.rewardType){case w.REWARD_TYPE.DIAMOND:break;case w.REWARD_TYPE.GOLD:g.instance.updatePlayerInfo("gold",this.amount),y.showFlyReward(w.REWARD_TYPE.GOLD,(()=>{p.dispatchEvent("updateGold")}));break;case w.REWARD_TYPE.CAR:y.buyCar(this.itemInfo.ID)}R.instance.hideDialog("common/showReward"),this.callback&&this.callback()}update(e){this.currentCar&&(this.carDegree-=e*this.rotateSpeed,this.carDegree<=-360&&(this.carDegree+=360),this.currentCar.eulerAngles=new d(0,this.carDegree,0))}}).prototype,"sfGold",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(L.prototype,"spIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(L.prototype,"lbRewardValue",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(L.prototype,"lbTips",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(L.prototype,"lbTitle",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(L.prototype,"lbImmediateBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(L.prototype,"ndCarParent",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(L.prototype,"ndBtnDouble",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(L.prototype,"ndBtnNormal",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(L.prototype,"ndBtnImmediately",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(L.prototype,"aniReward",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=L))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/clickBox.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./constant.ts","./uiManager.ts","./gameLogic.ts"],(function(e){"use strict";var i,t,r,s,o,n,c,l,a,u,h,d,p,g;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,r=e.defineProperty},function(e){s=e.cclegacy,o=e.ProgressBarComponent,n=e.Node,c=e.Label,l=e.Sprite,a=e._decorator,u=e.Component},function(e){h=e.fightConstants},function(e){d=e.constant},function(e){p=e.uiManager},function(e){g=e.gameLogic}],execute:function(){var B,C,b,f,w,R,m,k,_,x,y,P,v,I,O,L,T;s._RF.push({},"884dcSQc2hHsJby3+7ljIyd","clickBox",void 0);const{ccclass:D,property:M}=a;e("clickBox",(B=D("clickBox"),C=M(o),b=M(n),f=M(c),w=M(n),R=M(n),m=M(n),k=M(l),B((y=i((x=class extends u{constructor(...e){super(...e),t(this,"progress",y,this),t(this,"nodeReward",P,this),t(this,"lbReward",v,this),t(this,"nodeBox",I,this),t(this,"nodeMenu",O,this),t(this,"nodeClickBtn",L,this),t(this,"spIcon",T,this),r(this,"scheduleTime",0),r(this,"curProgress",50),r(this,"clickTimes",15),r(this,"curClick",0),r(this,"isOpenBox",!1),r(this,"rewardValue",0)}start(){}show(){this.scheduleTime=0,this.curProgress=50,this.clickTimes=10+Math.floor(5*Math.random()),this.curClick=0,this.isOpenBox=!1,this.nodeClickBtn.active=!0,this.progress.node.active=!0,this.nodeBox.active=!0,this.nodeReward.active=!1,this.nodeMenu.active=!1,g.updateRewardIcon(d.SHARE_FUNCTION.CLICK_BOX,this.spIcon)}onBtnBoxClick(){this.isOpenBox||(this.curClick++,this.curClick>this.clickTimes?(this.isOpenBox=!0,this.showReward()):(this.curProgress+=20,this.curProgress=this.curProgress>100?100:this.curProgress))}showReward(){this.nodeClickBtn.active=!1,this.progress.node.active=!1,this.nodeBox.active=!1,this.nodeReward.active=!0,this.nodeMenu.active=!0,this.lbReward.string=`+${h.CLICK_BOX_REWARD}`,this.rewardValue=h.CLICK_BOX_REWARD}update(e){this.scheduleTime+=e,this.scheduleTime>=.1&&(this.curProgress-=3,this.curProgress=this.curProgress<0?0:this.curProgress,this.scheduleTime=0),this.progress.progress=this.curProgress/100}onBtnNormalClick(){g.addGold(h.CLICK_BOX_REWARD),this.close()}onBtnDoubleClick(){g.openReward(d.SHARE_FUNCTION.CLICK_BOX,(e=>{e||(g.addGold(2*h.CLICK_BOX_REWARD),this.close())}))}close(){p.instance.hideDialog("fight/clickBox")}}).prototype,"progress",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(x.prototype,"nodeReward",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(x.prototype,"lbReward",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(x.prototype,"nodeBox",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(x.prototype,"nodeMenu",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(x.prototype,"nodeClickBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(x.prototype,"spIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=x))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/signInItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,i,n,s,r,a,o,l,u,I,c,h,f,p,m,S,g,R;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty,n=t.defineProperty},function(t){s=t.cclegacy,r=t.SpriteFrame,a=t.Sprite,o=t.Node,l=t.Label,u=t._decorator,I=t.Component,c=t.Animation},function(t){h=t.clientEvent},function(t){f=t.resourceUtil},function(t){p=t.constant},function(t){m=t.localConfig},function(t){S=t.playerData},function(t){g=t.uiManager},function(t){R=t.gameLogic}],execute:function(){var d,b,D,A,E,_,N,w,T,y,F,L,G,C,B,U,v,k,W,z,P,V,Y;s._RF.push({},"8a6efh8jF9Js7ZZXyAL57KG","signInItem",void 0);const{ccclass:O,property:x}=u;t("signInItem",(d=O("signInItem"),b=x(r),D=x(r),A=x(a),E=x(r),_=x(o),N=x(o),w=x(o),T=x(l),y=x(o),F=x(l),d((C=e((G=class extends I{constructor(...t){super(...t),i(this,"sfBgBlue",C,this),i(this,"sfYellow",B,this),i(this,"spReward",U,this),i(this,"sfGold",v,this),i(this,"nodeTick",k,this),i(this,"nodeBtnFillSign",W,this),i(this,"nodeBtnAfterFillSign",z,this),i(this,"lbDayIndex",P,this),i(this,"nodeLight",V,this),i(this,"lbValue",Y,this),n(this,"_parent",null),n(this,"itemInfo",null),n(this,"isHadCar",null)}start(){}init(t,e){this._parent=e,this.itemInfo=t,this.lbValue.string=t.rewardType===p.REWARD_TYPE.CAR?"":String(t.amount),this.lbDayIndex.string=String(t.ID),this.setIcon(t.rewardType),this.setStatus(t.status),this.node.getComponent(a).spriteFrame=Number(t.ID)>=7?this.sfBgBlue:this.sfYellow}setIcon(t){switch(t){case p.REWARD_TYPE.DIAMOND:break;case p.REWARD_TYPE.GOLD:this.spReward.spriteFrame=this.sfGold;break;case p.REWARD_TYPE.CAR:let t=m.instance.queryByID("car",this.itemInfo.amount).model;S.instance.isHadCarAndDuringPeriod(this.itemInfo.amount)?(this.spReward.spriteFrame=this.sfGold,2==this.itemInfo.ID?this.lbValue.string=String(p.GOLD_REWARD.SECOND):7==this.itemInfo.ID&&(this.lbValue.string=String(p.GOLD_REWARD.SEVENT))):f.setCarIcon(t,this.spReward,!1,(()=>{}))}}setStatus(t){switch(t){case p.SIGNIN_REWARD_STATUS.RECEIVED:this.showItemUI(!1,!0,!1,!1);break;case p.SIGNIN_REWARD_STATUS.RECEIVABLE:this.showItemUI(!0,!1,!1,!1);break;case p.SIGNIN_REWARD_STATUS.UNRECEIVABLE:this.showItemUI(!1,!1,!1,!1);break;case p.SIGNIN_REWARD_STATUS.FILL_SIGNIN:this.showItemUI(!1,!1,!0,!1);break;case p.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN:this.showItemUI(!0,!1,!1,!0)}}showItemUI(t,e,i,n){this.nodeLight.active=t;let s=this.nodeLight.getComponent(c);t?s.play():s.stop(),this.nodeTick.active=e,this.nodeBtnFillSign.active=i,this.nodeBtnAfterFillSign.active=n}onBtnAfterFillSignClick(){this.itemInfo.status!==p.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN&&this.itemInfo.status!==p.SIGNIN_REWARD_STATUS.RECEIVABLE||this._parent.receiveReward(this.itemInfo,!1,this.markReceived.bind(this))}markReceived(){this.itemInfo.status=p.SIGNIN_REWARD_STATUS.RECEIVED,this.setStatus(this.itemInfo.status),2!==this.itemInfo.ID&&7!==this.itemInfo.ID||this.isHadCar||S.instance.updateDictGetCarTime(this.itemInfo.amount),this.itemInfo.ID&&(S.instance.updateSignInReceivedDays(this.itemInfo.ID),h.dispatchEvent("updateSignIn")),this.close()}close(){g.instance.shiftFromPopupSeq("common/showReward"),S.instance.getSignInReceivedInfo().isAllReceived?g.instance.shiftFromPopupSeq("common/showReward"):g.instance.pushToPopupSeq("signIn/signIn","signIn",{})}markAfterFillSignIn(){this.itemInfo.status=p.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN,this.setStatus(this.itemInfo.status),S.instance.updateSignInFillSignInDays(this.itemInfo.ID,!1)}onBtnFillSignInClick(){R.openReward(p.SHARE_FUNCTION.FILL_SIGNIN,(t=>{t||this.markAfterFillSignIn()}))}}).prototype,"sfBgBlue",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(G.prototype,"sfYellow",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(G.prototype,"spReward",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(G.prototype,"sfGold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(G.prototype,"nodeTick",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(G.prototype,"nodeBtnFillSign",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(G.prototype,"nodeBtnAfterFillSign",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(G.prototype,"lbDayIndex",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(G.prototype,"nodeLight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(G.prototype,"lbValue",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=G))||L));s._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var r,e,n;return{setters:[function(t){r=t.defineProperty},function(t){e=t.cclegacy,n=t._decorator}],execute:function(){var i,s,a;e._RF.push({},"8cbacDdVTBOgZQMyvQzOeAz","lodash",void 0);const{ccclass:c}=n;t("lodash",c("lodash")((a=s=class t{static find(t,r){var e;if(Array.isArray(t)||(t=this.toArray(t)),(e=t.filter(r)).length)return e[0]}static forEach(t,r){if(Array.isArray(t))t.forEach(r);else{this.toArrayKey(t).forEach((function(e,n,i){const s=e.key,a=e.value;r(a,s,t)}))}}static cloneDeep(t){if(null===t||"object"!=typeof t)return t;let r={};t.constructor===Array&&(r=[]);for(let e in t)t.hasOwnProperty(e)&&(r[e]=this.cloneDeep(t[e]));return r}static map(t,r){Array.isArray(t)||(t=this.toArray(t));const e=[];return t.forEach((function(t,n,i){e.push(r(t,n,i))})),e}static random(t,r){var e=Math.random()*(r-t+1)+t;return Math.floor(e)}static toArrayKey(t){const r=[];for(let e in t)t.hasOwnProperty(e)&&r.push({key:e,value:t[e]});return r}static toArray(t){const r=[];for(let e in t)t.hasOwnProperty(e)&&r.push(t[e]);return r}static filter(t,r){return Array.isArray(t)||(t=this.toArray(t)),t.filter(r)}static isEqual(t,r){if(!(t instanceof Object)||!(r instanceof Object))return t===r;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(let e in t){const n=t[e]instanceof Object,i=r[e]instanceof Object;if(n&&i)return this.isEqual(t[e],r[e]);if(t[e]!==r[e])return!1}return!0}static pullAllWith(t,r,e){return r.forEach((function(r){t.filter((function(t){return e(t,r)})).forEach((function(r){var e=t.indexOf(r);-1!==t.indexOf(r)&&t.splice(e,1)}))})),t}static now(){return Date.now()}static pullAll(t,r){return r.forEach((function(r){const e=t.indexOf(r);-1!==t.indexOf(r)&&t.splice(e,1)})),t}static forEachRight(t,r){Array.isArray(t)||(t=this.toArray(t));for(let e=t.length-1;e>=0;e--){if(!r(t[e]))break}}static startsWith(t,r,e){return(t=t.substr(e)).startsWith(r)}static endsWith(t,r,e){return(t=t.substr(e)).endsWith(r)}static remove(t,r){const e=[],n=[];return t.forEach((function(t,i){r(t)&&(e.push(t),n.push(i))})),this.basePullAt(t,n),e}static basePullAt(t,r){for(var e,n=t?r.length:0,i=n-1;n--;){var s=r[n];n!==i&&s===e||(e=s,Array.prototype.splice.call(t,s,1))}return t}static findIndex(t,r,e){var n;if(t=t.slice(e),"function"==typeof r){for(n=0;n<t.length;n++)if(r(t[n]))return n}else if(Array.isArray(r))for(n=0;n<t.length;n++){var i=r[0],s=!0;if(r.length>1&&(s=r[1]),t[n][i]===s)return n}else for(n=0;n<t.length;n++)if(t[n]===r)return n;return-1}static concat(){var t=arguments.length;if(!t)return[];for(var r=arguments[0],e=1;e<t;)r=r.concat(arguments[e]),e++;return r}static isNumber(t){return"number"==typeof t}static indexOf(t,r,e){return(t=t.slice(e)).indexOf(r)}static join(t,r){if(null===t)return"";var e="";return t.forEach((function(t){e+=t+r})),e.substr(0,e.length-1)}static split(t,r,e){return t.split(r,e)}static max(t){if(t&&t.length){for(var r,e=0;e<t.length;e++)0===e?r=t[0]:r<t[e]&&(r=t[e]);return r}}static drop(t,r){return(null===t?0:t.length)?t.slice(r):[]}static flattenDeep(t){return t.reduce(((t,r)=>t.concat(r)))}static uniq(t){const r=[];return t.forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r}static isNaN(t){return this.isNumber(t)&&t!==+t}static chunk(t,r){if(!(null===t?0:t.length)||r<1)return[];const e=[];for(;t.length>r;)e.push(t.slice(0,r)),t=t.slice(r);return e.push(t),e}static toFinite(t){const r=1/0;if(!t)return 0===t?t:0;if((t=Number(t))===r||t===-1/0){return 17976931348623157e292*(t<0?-1:1)}return t==t?t:0}static baseRange(t,r,e,n){let i=-1,s=(0,Math.max)((0,Math.ceil)((r-t)/(e||1)),0),a=Array(s);for(;s--;)a[n?s:++i]=t,t+=e;return a}static isObject(t){const r=typeof t;return null!==t&&("object"===r||"function"===r)}static isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=t.MAX_SAFE_INTEGER}static isArrayLike(t){return null!==t&&this.isLength(t.length)}static eq(t,r){return t===r||t!=t&&r!=r}static isIndex(r,e){const n=typeof r;return!!(e=null===e?t.MAX_SAFE_INTEGER:e)&&("number"===n||"symbol"!==n&&/^(?:0|[1-9]\d*)$/.test(r))&&r>-1&&r%1==0&&r<e}static isIterateeCall(t,r,e){if(!this.isObject(e))return!1;var n=typeof r;return!!("number"===n?this.isArrayLike(e)&&this.isIndex(r,e.length):"string"===n&&r in e)&&this.eq(e[r],t)}static createRange(t){return((r,e,n)=>(n&&"number"!=typeof n&&this.isIterateeCall(r,e,n)&&(e=n=void 0),r=this.toFinite(r),void 0===e?(e=r,r=0):e=this.toFinite(e),n=void 0===n?r<e?1:-1:this.toFinite(n),this.baseRange(r,e,n,t))).bind(this)}static maxBy(t,r){if(t&&t.length){let e=-1,n=-1;for(let i=0;i<t.length;i++)0===i?(e=r(t[0]),n=t[0]):e<t[i]&&(e=t[i],n=t[i]);return n}}static minBy(t,r){if(t&&t.length){let n=-1,i=-1;for(var e=0;e<t.length;e++)0===e?(n=r(t[0]),i=t[0]):n>t[e]&&(n=r(t[e]),i=t[e]);return i}}static sumBy(t,r){let e=0;for(let n in t)e+=r(t[n]);return e}static countBy(t){const r={};for(let e in t){const n=t[e];r.hasOwnProperty(n)?r[n]+=1:r[n]=1}return r}},r(s,"MAX_SAFE_INTEGER",9007199254740991),i=a))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var e,o,i,s,n;return{setters:[function(t){e=t.defineProperty},function(t){o=t.cclegacy,i=t._decorator,s=t.instantiate,n=t.NodePool}],execute:function(){var c,r,a;o._RF.push({},"907776q4iZNubarZf3Ut3A8","poolManager",void 0);const{ccclass:l,property:d}=i;t("poolManager",l("poolManager")((a=r=class t{constructor(){e(this,"dictPool",{}),e(this,"dictPrefab",{})}static get instance(){return this._instance||(this._instance=new t),this._instance}getNode(t,e){let o,i=t.data.name;if(this.dictPrefab[i]=t,this.dictPool.hasOwnProperty(i)){let e=this.dictPool[i];o=e.size()>0?e.get():s(t)}else{let e=new n;this.dictPool[i]=e,o=s(t)}return o.parent=e,o}putNode(t){let e=t.name,o=null;this.dictPool.hasOwnProperty(e)?o=this.dictPool[e]:(o=new n,this.dictPool[e]=o),o.put(t)}clearPool(t){if(this.dictPool.hasOwnProperty(t)){this.dictPool[t].clear()}}},e(r,"_instance",void 0),c=a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameSet.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,a,n,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.defineProperty,i=e.initializerDefineProperty},function(e){a=e.cclegacy,n=e.SpriteFrame,c=e._decorator}],execute:function(){var o,p,s,u,l,f;a._RF.push({},"93cd23dxExEBLbD/xbMp1PN","SpriteFrameSet",void 0);const{ccclass:m,property:S}=c;e("default",(o=m("SpriteFrameSet"),p=S({type:n}),o((l=t((u=class{constructor(){r(this,"name","SpriteFrameSet"),i(this,"language",l,this),i(this,"spriteFrame",f,this)}}).prototype,"language",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=t(u.prototype,"spriteFrame",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=u))||s));a._RF.pop()}}}));

System.register("chunks:///_virtual/lotteryItem.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./constant.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./LanguageData.ts"],(function(t){"use strict";var e,r,o,n,i,a,s,l,c,u,p,f,h,m,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty,o=t.defineProperty},function(t){n=t.cclegacy,i=t.SpriteFrame,a=t.Sprite,s=t.Label,l=t._decorator,c=t.Component},function(t){u=t.resourceUtil},function(t){p=t.constant},function(t){f=t.localConfig},function(t){h=t.playerData},function(t){m=t.uiManager},function(t){I=t.i18n}],execute:function(){var d,w,y,D,g,R,b,C,T;n._RF.push({},"93fc8seXTpPJqvHF6Jlpios","lotteryItem",void 0);const{ccclass:v,property:E}=l;t("lotteryItem",(d=v("lotteryItem"),w=E(i),y=E(a),D=E(s),d((b=e((R=class extends c{constructor(...t){super(...t),r(this,"imgGold",b,this),r(this,"spItem",C,this),r(this,"lbValue",T,this),o(this,"carInfo",void 0)}start(){}show(t){this.carInfo=f.instance.queryByID("car",t),u.setCarIcon(this.carInfo.model,this.spItem,!1,(()=>{}))}showReward(t){if(console.log(this.carInfo.ID),h.instance.hasCar(this.carInfo.ID)){let t={rewardType:p.REWARD_TYPE.GOLD,amount:p.LOTTERY.EXCHANGE,ID:this.carInfo.ID};m.instance.showDialog("common/showReward",[t,!1,I.t("showReward.title"),()=>{},I.t("showReward.alreadyHadCar")])}else{let e={rewardType:p.REWARD_TYPE.CAR,amount:1,ID:this.carInfo.ID};m.instance.showDialog("common/showReward",[e,!1,I.t("showReward.title"),()=>{t.receiveCarTimes+=1}])}}}).prototype,"imgGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(R.prototype,"spItem",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(R.prototype,"lbValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=R))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/roadPoint.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./resourceUtil.ts"],(function(e){"use strict";var t,i,r,n,a,s,l,o,u,c,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.defineProperty},function(e){n=e.cclegacy,a=e.Enum,s=e.Node,l=e._decorator,o=e.Vec3,u=e.Component,c=e.macro},function(e){p=e.fightConstants},function(e){h=e.resourceUtil}],execute:function(){var T,d,_,y,O,P,b,A,f,E,R,N,m,I,D,g,Y,v,C,G,S;e({ROAD_MOVE_TYPE:void 0,ROAD_POINT_TYPE:void 0}),n._RF.push({},"953fazcJb1LuJlDQlkFCkFG","roadPoint",void 0);const{ccclass:w,property:z}=l;let M,F;!function(e){e[e["普通节点"]=p.ROAD_POINT_TYPE.NORMAL]="普通节点",e[e["开始节点"]=p.ROAD_POINT_TYPE.START]="开始节点",e[e["接客节点"]=p.ROAD_POINT_TYPE.GREETING]="接客节点",e[e["送客节点"]=p.ROAD_POINT_TYPE.PLATFORM]="送客节点",e[e["结束节点"]=p.ROAD_POINT_TYPE.END]="结束节点",e[e["AI开始节点"]=p.ROAD_POINT_TYPE.AI_START]="AI开始节点"}(M||(M=e("ROAD_POINT_TYPE",{}))),a(M),function(e){e[e["直线行走"]=p.ROAD_MOVE_TYPE.LINE]="直线行走",e[e["曲线行走"]=p.ROAD_MOVE_TYPE.BEND]="曲线行走"}(F||(F=e("ROAD_MOVE_TYPE",{}))),a(F);e("roadPoint",(T=w("roadPoint"),d=z({displayName:"类型",type:M,displayOrder:1}),_=z({displayName:"下一站",type:s,displayOrder:2}),y=z({displayName:"行走方式",type:F,displayOrder:3}),O=z({displayName:"顺时针",displayOrder:4,visible:function(){return this.moveType===p.ROAD_MOVE_TYPE.BEND}}),P=z({displayName:"顾客方向",displayOrder:4,visible:function(){return this.type===p.ROAD_POINT_TYPE.GREETING||this.type===p.ROAD_POINT_TYPE.PLATFORM}}),b=z({displayName:"延迟生成/秒",displayOrder:5,visible:function(){return this.type===p.ROAD_POINT_TYPE.AI_START}}),A=z({displayName:"生成频率/秒",displayOrder:5,visible:function(){return this.type===p.ROAD_POINT_TYPE.AI_START}}),f=z({displayName:"车辆行驶速度",displayOrder:5,visible:function(){return this.type===p.ROAD_POINT_TYPE.AI_START}}),E=z({displayName:"产生车辆(,分隔)",displayOrder:5,visible:function(){return this.type===p.ROAD_POINT_TYPE.AI_START}}),T((m=t((N=class extends u{constructor(...e){super(...e),i(this,"type",m,this),i(this,"next",I,this),i(this,"moveType",D,this),i(this,"clockwise",g,this),i(this,"direction",Y,this),i(this,"delayTime",v,this),i(this,"genInterval",C,this),i(this,"carSpeed",G,this),i(this,"cars",S,this),r(this,"arrCars",[]),r(this,"_generateCb",null)}start(){this.arrCars=this.cars.split(",")}startGenerateCar(e){this.type===p.ROAD_POINT_TYPE.AI_START&&(this._generateCb=e,this.stopGenerateCar(),this.scheduleOnce(this.delayStartGen,this.delayTime),h.getCarsBatch(this.arrCars,(()=>{}),(()=>{})))}delayStartGen(){this.scheduleGen(),this.schedule(this.scheduleGen,this.genInterval,c.REPEAT_FOREVER)}scheduleGen(){let e=Math.floor(Math.random()*this.arrCars.length);this._generateCb&&this._generateCb(this,this.arrCars[e])}stopGenerateCar(){this.unschedule(this.delayStartGen),this.unschedule(this.scheduleGen)}}).prototype,"type",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.普通节点}}),I=t(N.prototype,"next",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(N.prototype,"moveType",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return F.直线行走}}),g=t(N.prototype,"clockwise",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=t(N.prototype,"direction",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new o}}),v=t(N.prototype,"delayTime",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),C=t(N.prototype,"genInterval",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),G=t(N.prototype,"carSpeed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),S=t(N.prototype,"cars",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"201"}}),R=N))||R));n._RF.pop()}}}));

System.register("chunks:///_virtual/revive.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var i,n,e,o,s,r,c,u,l,a,p,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,e=t.defineProperty},function(t){o=t.cclegacy,s=t.Sprite,r=t.Widget,c=t._decorator,u=t.Component},function(t){l=t.clientEvent},function(t){a=t.constant},function(t){p=t.uiManager},function(t){h=t.gameLogic}],execute:function(){var g,v,f,w,C,d,D,b,m;o._RF.push({},"95f63L653dBgLBdIgYWzpHv","revive",void 0);const{ccclass:R,property:y}=c;t("revive",(g=R("revive"),v=y(s),f=y(s),w=y(r),g((D=i((d=class extends u{constructor(...t){super(...t),n(this,"spCountDown",D,this),n(this,"spIcon",b,this),n(this,"wgMenu",m,this),e(this,"closeCb",null),e(this,"countDownTime",0),e(this,"currentTime",0),e(this,"isCountDowning",!1)}start(){}show(t){this.closeCb=t,this.countDownTime=5,this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0,h.updateRewardIcon(a.SHARE_FUNCTION.RELIVE,this.spIcon)}onBtnReviveClick(){this.isCountDowning=!1,h.openReward(a.SHARE_FUNCTION.RELIVE,(t=>{t?this.isCountDowning=!0:(l.dispatchEvent("revive"),p.instance.hideDialog("fight/revive"))}))}onBtnSkipClick(){this.isCountDowning=!1,p.instance.hideDialog("fight/revive"),this.closeCb&&this.closeCb()}}).prototype,"spCountDown",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(d.prototype,"spIcon",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(d.prototype,"wgMenu",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=d))||C));o._RF.pop()}}}));

System.register("chunks:///_virtual/blockInputEvent.ts",["cc"],(function(t){"use strict";var o,s,n,i;return{setters:[function(t){o=t.cclegacy,s=t.Component,n=t.Node,i=t._decorator}],execute:function(){var e;o._RF.push({},"968ba6c9F9AupY/AbKjAj++","blockInputEvent",void 0);const{ccclass:p,property:h}=i;t("blockInputEvent",p("blockInputEvent")(e=class extends s{start(){}onEnable(){this.node.on(n.EventType.TOUCH_START,this.stopPropagation,this),this.node.on(n.EventType.TOUCH_END,this.stopPropagation,this),this.node.on(n.EventType.TOUCH_MOVE,this.stopPropagation,this),this.node.on(n.EventType.TOUCH_CANCEL,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_DOWN,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_ENTER,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_MOVE,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_LEAVE,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_UP,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_WHEEL,this.stopPropagation,this)}onDisable(){this.node.off(n.EventType.TOUCH_START,this.stopPropagation,this),this.node.off(n.EventType.TOUCH_END,this.stopPropagation,this),this.node.off(n.EventType.TOUCH_MOVE,this.stopPropagation,this),this.node.off(n.EventType.TOUCH_CANCEL,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_DOWN,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_ENTER,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_MOVE,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_LEAVE,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_UP,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_WHEEL,this.stopPropagation,this)}stopPropagation(t){t.propagationImmediateStopped=!0,t.propagationStopped=!0}})||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./configuration.ts","./constant.ts","./util.ts","./localConfig.ts"],(function(e){"use strict";var t,n,a,i,s,r,o,l;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy,a=e._decorator,i=e.Component},function(e){s=e.configuration},function(e){r=e.constant},function(e){o=e.util},function(e){l=e.localConfig}],execute:function(){var I,h,y;n._RF.push({},"985d59n5DNIrIcY9mIscZXN","playerData",void 0);const{ccclass:f,property:c}=a;e("playerData",f("playerData")((y=h=class e extends i{constructor(...e){super(...e),t(this,"serverTime",0),t(this,"localTime",0),t(this,"showCar",0),t(this,"isComeFromBalance",!1),t(this,"userId",""),t(this,"playerInfo",{}),t(this,"history",null),t(this,"settings",null),t(this,"isNewBee",!1),t(this,"dataVersion",""),t(this,"signInInfo",null)}static get instance(){return this._instance||(this._instance=new e),this._instance}loadGlobalCache(){let e=s.instance.getUserId();e&&(this.userId=e)}loadFromCache(){this.playerInfo=this.loadDataByKey(r.LOCAL_CACHE.PLAYER),this.playerInfo.currentCar?this.showCar=this.playerInfo.currentCar:this.showCar=r.INITIAL_CAR,this.history=this.loadDataByKey(r.LOCAL_CACHE.HISTORY),this.settings=this.loadDataByKey(r.LOCAL_CACHE.SETTINGS)}loadDataByKey(e){let t={},n=s.instance.getConfigData(e);if(n)try{t=JSON.parse(n)}catch(e){t={}}return t}createPlayerInfo(e){if(this.playerInfo.level=1,this.playerInfo.realLevel=1,this.playerInfo.passCheckPoint=!1,this.playerInfo.createDate=new Date,this.playerInfo.currentCar=r.INITIAL_CAR,this.playerInfo.cars=[],this.playerInfo.cars.push(r.INITIAL_CAR),this.playerInfo.dictBuyTask={},this.showCar=this.playerInfo.currentCar,this.isNewBee=!0,this.playerInfo.signInInfo={},this.playerInfo.dictGetCarTime={},e)for(let t in e)this.playerInfo[t]=e[t];this.savePlayerInfoToLocalCache()}saveAccount(e){this.userId=e,s.instance.setUserId(e)}savePlayerInfoToLocalCache(){s.instance.setConfigData(r.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))}saveAll(){s.instance.setConfigDataWithoutSave(r.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),s.instance.setConfigDataWithoutSave(r.LOCAL_CACHE.HISTORY,JSON.stringify(this.history)),s.instance.setConfigDataWithoutSave(r.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings)),s.instance.setConfigData(r.LOCAL_CACHE.DATA_VERSION,this.dataVersion)}updatePlayerInfo(e,t){let n=!1;this.playerInfo.hasOwnProperty(e)&&("number"==typeof t?(n=!0,this.playerInfo[e]+=t,this.playerInfo[e]<0&&(this.playerInfo[e]=0)):"boolean"!=typeof t&&"string"!=typeof t||(n=!0,this.playerInfo[e]=t)),n&&s.instance.setConfigData(r.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))}updateSignInCurrentDay(){if(0===Object.keys(this.playerInfo.signInInfo).length||this.isNeedRecycleSignInInfo())this.createNewSignInInfo();else{let e=o.getDeltaDays(this.playerInfo.signInInfo.signInDate,Date.now());if(0===e)return;this.updateSignInFillSignInDays(0,!0),this.playerInfo.signInInfo.currentDay+=e,this.playerInfo.signInInfo.currentDay<=0&&this.createNewSignInInfo(),this.playerInfo.signInInfo.currentDay>r.MAX_SIGNIN_DAY?r.MAX_SIGNIN_DAY:this.playerInfo.signInInfo.currentDay,this.playerInfo.signInInfo.signInDate=Date.now()}this.savePlayerInfoToLocalCache()}createNewSignInInfo(){this.playerInfo.hasOwnProperty("signInInfo")||(this.playerInfo.signInInfo={},this.playerInfo.dictGetCarTime={});let e=this.playerInfo.signInInfo;e.createDate=Date.now(),e.signInDate=Date.now(),e.currentDay=1,e.receivedDays=[],e.afterFillSignInDays=[],this.savePlayerInfoToLocalCache()}isNeedRecycleSignInInfo(){this.playerInfo.signInInfo||this.createNewSignInInfo();let e=!1;return o.getDeltaDays(this.playerInfo.signInInfo.createDate,Date.now())>=r.MAX_SIGNIN_DAY&&(e=!0),e}updateSignInReceivedDays(e){let t=this.playerInfo.signInInfo.receivedDays;Array.isArray(t)&&t.includes(e)||(t.push(Number(e)),this.savePlayerInfoToLocalCache())}updateSignInFillSignInDays(e,t){let n=this.playerInfo.signInInfo.afterFillSignInDays;if(t)n.length=0;else{if(Array.isArray(n)&&n.includes(e))return;n.push(Number(e))}this.savePlayerInfoToLocalCache()}getSignInReceivedInfo(){this.playerInfo.signInInfo||this.createNewSignInInfo();let e=this.playerInfo.signInInfo,t=!1,n=!1;return t=!(e.receivedDays.length<e.currentDay),n=!!e.receivedDays.includes(e.currentDay),{isAllReceived:t,isTodayReceived:n}}isHadCarAndDuringPeriod(e){let t=this.playerInfo.signInInfo.createDate;this.playerInfo.dictGetCarTime||(this.playerInfo.dictGetCarTime={});let n=this.playerInfo.dictGetCarTime[e];return-1!==this.playerInfo.cars.indexOf(e)&&n&&n<t}updateDictGetCarTime(e){this.playerInfo.dictGetCarTime||(this.playerInfo.dictGetCarTime={}),this.playerInfo.dictGetCarTime[e]=this.playerInfo.signInInfo.createDate,s.instance.setConfigData(r.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))}getLastOnlineRewardTime(){return this.playerInfo.onlineRewardTime||(this.playerInfo.onlineRewardTime=this.getCurrentTime(),this.savePlayerInfoToLocalCache()),this.playerInfo.onlineRewardTime}updateLastOnlineRewardTime(e){let t=this.getCurrentTime()-1e3*e;this.playerInfo.onlineRewardTime=t,this.savePlayerInfoToLocalCache()}syncServerTime(e){this.serverTime=e,this.localTime=Date.now()}getCurrentTime(){let e=Date.now()-this.localTime;return this.serverTime+e}hasCar(e){return e===r.INITIAL_CAR||(this.playerInfo.cars||(this.playerInfo.cars=[r.INITIAL_CAR]),-1!==this.playerInfo.cars.indexOf(e))}hasCarCanReceived(){let e=l.instance.getCars();for(let t=0;t<e.length;t++){let n=e[t];if(n.type!==r.BUY_CAR_TYPE.GOLD&&n.type!==r.BUY_CAR_TYPE.SIGNIN&&(!this.hasCar(n.ID)&&this.playerInfo.dictBuyTask&&this.playerInfo.dictBuyTask.hasOwnProperty(n.type)&&this.playerInfo.dictBuyTask[n.type]>=n.num))return!0}return!1}finishBuyTask(e,t,n){this.playerInfo.dictBuyTask||(this.playerInfo.dictBuyTask={}),this.playerInfo.dictBuyTask.hasOwnProperty(e)&&n?this.playerInfo.dictBuyTask[e]+=t:this.playerInfo.dictBuyTask[e]=t,this.savePlayerInfoToLocalCache()}getBuyTypeProgress(e){return this.playerInfo.dictBuyTask&&this.playerInfo.dictBuyTask.hasOwnProperty(e)?this.playerInfo.dictBuyTask[e]:0}getCurrentCar(){return this.playerInfo.currentCar||(this.playerInfo.currentCar=r.INITIAL_CAR),this.playerInfo.currentCar}useCar(e){return!!this.hasCar(e)&&(this.playerInfo.currentCar=e,this.savePlayerInfoToLocalCache(),this.showCar=this.playerInfo.currentCar,!0)}buyCar(e){return-1!==this.playerInfo.cars.indexOf(e)||(this.playerInfo.cars.push(e),this.savePlayerInfoToLocalCache()),!0}clear(){this.playerInfo={},this.settings={},this.saveAll()}passLevel(e){this.playerInfo.level++,this.playerInfo.gold+=e,console.log("###1 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel),this.playerInfo.passCheckPoint?(this.playerInfo.realLevel=this.getRandLevel(),console.log("###3 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel)):this.playerInfo.level>=r.MAX_LEVEL?(this.playerInfo.realLevel=r.MAX_LEVEL,this.playerInfo.level=r.MAX_LEVEL,this.playerInfo.passCheckPoint=!0,console.log("###2 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel)):this.playerInfo.realLevel=this.playerInfo.level,this.savePlayerInfoToLocalCache()}getRandLevel(){let e=-1;for(;-1===e;){let t=16+Math.floor(5*Math.random());t!==this.playerInfo.realLevel&&(e=t)}return e}},t(h,"_instance",void 0),I=y))||I);n._RF.pop()}}}));

System.register("chunks:///_virtual/GameRoot.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./setting.ts"],(function(t){"use strict";var e,o,n,i,c,a,s,r,u,l;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.AudioSource,c=t._decorator,a=t.Component,s=t.assert,r=t.game},function(t){u=t.audioManager},function(t){l=t.setting}],execute:function(){var d,p,g,h,f;n._RF.push({},"98dcdQl8GhEYLJRG8ap+Eh+","GameRoot",void 0);const{ccclass:m,property:y}=c;t("GameRoot",(d=m("GameRoot"),p=y(i),d((f=e((h=class extends a{constructor(...t){super(...t),o(this,"_audioSource",f,this)}onLoad(){const t=this.getComponent(i);s(t),this._audioSource=t,r.addPersistRootNode(this.node),u.instance.init(this._audioSource)}onEnable(){u.instance.playMusic(!0),l.checkState()}start(){cocosAnalytics&&cocosAnalytics.enableDebug(!0)}}).prototype,"_audioSource",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/loading.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./updateValueLabel.ts"],(function(s){"use strict";var t,e,r,i,o,l,n,a,g;return{setters:[function(s){t=s.applyDecoratedDescriptor,e=s.initializerDefineProperty,r=s.defineProperty},function(s){i=s.cclegacy,o=s.Label,l=s._decorator,n=s.Component,a=s.Vec3},function(s){g=s.updateValueLabel}],execute:function(){var u,h,p,c,P,b,d;i._RF.push({},"99c5fx0klFHq52oGPdZL7Z5","loading",void 0);const{ccclass:f,property:y}=l;s("loading",(u=f("loading"),h=y(g),p=y(o),u((b=t((P=class extends n{constructor(...s){super(...s),e(this,"lbProgress",b,this),e(this,"lbTips",d,this),r(this,"targetProgress",0),r(this,"oriPos",new a)}start(){this.show(0)}show(s){this.targetProgress=s||0,this.lbProgress.playUpdateValue(this.targetProgress,this.targetProgress,0),this.lbProgress.isPlaying=!1,this.lbTips.string="",this.oriPos.set(this.lbProgress.node.position)}updateProgress(s,t){this.targetProgress=s;let e=Number(this.lbProgress.label.string);this.lbProgress.playUpdateValue(e,this.targetProgress,(this.targetProgress-e)/20),t&&(this.lbTips.string=t),this.oriPos&&this.lbProgress.node.setPosition(new a(this.oriPos.x-10,this.oriPos.y,this.oriPos.z))}}).prototype,"lbProgress",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(P.prototype,"lbTips",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=P))||c));i._RF.pop()}}}));

System.register("chunks:///_virtual/signIn.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./constant.ts","./util.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts","./LanguageData.ts","./signInItem.ts"],(function(e){"use strict";var t,i,n,r,a,s,o,l,c,u,d,h,I,p,R,f,g,S,v,y,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,n=e.defineProperty},function(e){r=e.cclegacy,a=e.Node,s=e.Sprite,o=e.SpriteFrame,l=e.Prefab,c=e._decorator,u=e.Component,d=e.Button,h=e.instantiate},function(e){I=e.clientEvent},function(e){p=e.constant},function(e){R=e.util},function(e){f=e.localConfig},function(e){g=e.playerData},function(e){S=e.uiManager},function(e){v=e.gameLogic},function(e){y=e.i18n},function(e){b=e.signInItem}],execute:function(){var D,m,B,N,E,T,w,A,C,_,G,F,L,z,P,W,U,k,O,V,Y,H,q,x,M,j,J,K,Q,X,Z;r._RF.push({},"9d016bBiB5J1prtR6VcBPd4","signIn",void 0);const{ccclass:$,property:ee}=c;e("signIn",(D=$("signIn"),m=ee(a),B=ee(a),N=ee(a),E=ee(a),T=ee(a),w=ee(a),A=ee(s),C=ee(s),_=ee(o),G=ee(o),F=ee(o),L=ee(o),z=ee(a),P=ee(l),D((k=t((U=class extends u{constructor(...e){super(...e),i(this,"ndBtnNormal",k,this),i(this,"ndBtnDouble",O,this),i(this,"ndBtnReceive",V,this),i(this,"ndReceiveIconn",Y,this),i(this,"ndBtnClose",H,this),i(this,"ndBtnNotYet",q,this),i(this,"spDoubleBtnIcon",x,this),i(this,"spReceiveBtnIcon",M,this),i(this,"sfBlue",j,this),i(this,"sfGray",J,this),i(this,"sfVideo",K,this),i(this,"sfShare",Q,this),i(this,"arrNodeDay",X,this),i(this,"pbSignInItem",Z,this),n(this,"currentDay",0),n(this,"arrReceived",[]),n(this,"arrAfterFillSignIn",[]),n(this,"isTodayReceived",!1),n(this,"isAllReceived",!1),n(this,"arrSignInItemScript",[]),n(this,"currentReward",void 0),n(this,"currentRewardType",void 0),n(this,"isHadCar",void 0),n(this,"createDate",void 0),n(this,"getCarDate",void 0)}start(){}show(){g.instance.updateSignInCurrentDay();let e=g.instance.playerInfo.signInInfo;this.currentDay=e.currentDay,this.arrReceived=e.receivedDays,this.arrAfterFillSignIn=e.afterFillSignInDays,v.updateRewardIcon(p.SHARE_FUNCTION.SIGNIN,this.spDoubleBtnIcon),v.updateRewardIcon(p.SHARE_FUNCTION.SIGNIN,this.spReceiveBtnIcon),this.showSignInInfo(),this.setButtonStyle(),this.ndReceiveIconn.active=!0}setButtonStyle(){let e=g.instance.getSignInReceivedInfo();this.isTodayReceived=e.isTodayReceived,this.isAllReceived=e.isAllReceived,this.ndBtnDouble.getComponent(s).spriteFrame=this.isTodayReceived?this.sfGray:this.sfBlue,this.ndBtnDouble.getComponent(d).interactable=!this.isTodayReceived,this.ndBtnReceive.getComponent(s).spriteFrame=this.isTodayReceived?this.sfGray:this.sfBlue,this.ndBtnReceive.getComponent(d).interactable=!this.isTodayReceived;let t=f.instance.getTableArr("signIn");this.currentReward=t[this.currentDay-1],this.currentRewardType=this.currentReward.rewardType,this.currentRewardType===p.REWARD_TYPE.CAR?g.instance.isHadCarAndDuringPeriod(this.currentReward.amount)?(this.ndBtnDouble.active=!0,this.ndBtnReceive.active=!1,this.ndBtnNormal.active=!this.isTodayReceived,this.ndBtnNotYet.active=!1):(this.ndBtnDouble.active=!1,this.ndBtnReceive.active=!0,this.ndBtnNormal.active=!1,this.ndBtnNotYet.active=!this.isTodayReceived):(this.ndBtnDouble.active=!0,this.ndBtnReceive.active=!1,this.ndBtnNormal.active=!this.isTodayReceived,this.ndBtnNotYet.active=!1)}showSignInInfo(){this.arrSignInItemScript=[];let e=f.instance.getTableArr("signIn");for(let t=0;t<e.length;t++){let i=e[t].ID,n=!!this.arrReceived.includes(i);i<=this.currentDay?(e[t].status=n?p.SIGNIN_REWARD_STATUS.RECEIVED:p.SIGNIN_REWARD_STATUS.RECEIVABLE,e[t].status===p.SIGNIN_REWARD_STATUS.RECEIVABLE&&i<this.currentDay&&(e[t].status=p.SIGNIN_REWARD_STATUS.FILL_SIGNIN,this.arrAfterFillSignIn.includes(i)&&(e[t].status=p.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN))):e[t].status=p.SIGNIN_REWARD_STATUS.UNRECEIVABLE;let r=this.arrNodeDay[t],a=null;r.getChildByName("signInItem")?a=r.getChildByName("signInItem"):(a=h(this.pbSignInItem),r.addChild(a));let s=a.getComponent(b);s.init(e[t],this),this.arrSignInItemScript.includes(s)||this.arrSignInItemScript.push(s)}}receiveReward(e,t,i){let n=e.ID;if(this.currentDay<n)return;let r=y.t("showReward.signinReward"),a=R.clone(e);if(2==e.ID||7==e.ID){let t=f.instance.queryByID("car",e.amount);a.ID=t.ID,-1!==g.instance.playerInfo.cars.indexOf(t.ID)&&(a.rewardType=p.REWARD_TYPE.GOLD,a.amount=2==e.ID?p.GOLD_REWARD.SECOND:p.GOLD_REWARD.SEVENT)}if(a.amount=t?a.amount*=2:a.amount,S.instance.shiftFromPopupSeq("signIn/signIn"),a.rewardType===p.REWARD_TYPE.GOLD)return g.instance.updatePlayerInfo("gold",a.amount),v.showFlyReward(p.REWARD_TYPE.GOLD,(()=>{I.dispatchEvent("updateGold")})),void(i&&i());S.instance.pushToPopupSeq("common/showReward","showReward",[a,!1,r,i])}receiveClick(e){for(let t=0;t<this.arrSignInItemScript.length;t++){let i=this.arrSignInItemScript[t];if(i.itemInfo.status===p.SIGNIN_REWARD_STATUS.RECEIVABLE){i._parent.receiveReward(i.itemInfo,e,(()=>{i.markReceived()}));break}}}onBtnDoubleClick(){v.openReward(p.SHARE_FUNCTION.SIGNIN,(e=>{e||this.receiveClick(!0)}))}onBtnNormalClick(){this.receiveClick(!1)}onBtnReceiveClick(){v.openReward(p.SHARE_FUNCTION.SIGNIN,(e=>{e||this.receiveClick(!1)}))}onBtnCloseClick(){S.instance.shiftFromPopupSeq("signIn/signIn")}}).prototype,"ndBtnNormal",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(U.prototype,"ndBtnDouble",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(U.prototype,"ndBtnReceive",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(U.prototype,"ndReceiveIconn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(U.prototype,"ndBtnClose",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(U.prototype,"ndBtnNotYet",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(U.prototype,"spDoubleBtnIcon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(U.prototype,"spReceiveBtnIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(U.prototype,"sfBlue",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(U.prototype,"sfGray",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(U.prototype,"sfVideo",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(U.prototype,"sfShare",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(U.prototype,"arrNodeDay",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=t(U.prototype,"pbSignInItem",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=U))||W));r._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./csvManager.ts"],(function(r){"use strict";var t,e,s,a,n;return{setters:[function(r){t=r.defineProperty},function(r){e=r.cclegacy,s=r._decorator},function(r){a=r.resourceUtil},function(r){n=r.csvManager}],execute:function(){var i,c,l;e._RF.push({},"acd0cVlaIhLurmAIUS/N+2B","localConfig",void 0);const{ccclass:o,property:u}=s;r("localConfig",o("localConfig")((l=c=class r{constructor(){t(this,"csvManager",null),t(this,"arrCars",[]),t(this,"_callback",null),t(this,"_skills",{}),t(this,"currentLoad",0),t(this,"cntLoad",0),t(this,"servers",[])}static get instance(){return this._instance||(this._instance=new r),this._instance}loadConfig(r){this._callback=r,this.csvManager=new n,this.loadCSV()}loadCSV(){var r=["talk","car","signIn"];this.cntLoad=r.length+1,r.forEach(((r,t,e)=>{a.getData(r,((t,e)=>{this.csvManager.addTable(r,e),this.tryToCallbackOnFinished()}))})),a.getJsonData("servers",((r,t)=>{this.servers=t,this.tryToCallbackOnFinished()}))}queryOne(r,t,e){return this.csvManager.queryOne(r,t,e)}queryByID(r,t){return this.csvManager.queryByID(r,t)}getTable(r){return this.csvManager.getTable(r)}getTableArr(r){return this.csvManager.getTableArr(r)}getCars(){if(this.arrCars.length>0)return this.arrCars;let t=r.instance.getTableArr("car");return this.arrCars=t.sort(((r,t)=>r.sort-t.sort)),this.arrCars}queryAll(r,t,e){return this.csvManager.queryAll(r,t,e)}queryIn(r,t,e){return this.csvManager.queryIn(r,t,e)}queryByCondition(r,t){return this.csvManager.queryByCondition(r,t)}tryToCallbackOnFinished(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())}getCurrentServer(){return this.servers[0]}getVersion(){let r=this.getCurrentServer();return r?r.version:"unknown"}},t(c,"_instance",void 0),i=l))||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./poolManager.ts","./tips.ts"],(function(i){"use strict";var t,e,s,o,a,n,h,r;return{setters:[function(i){t=i.defineProperty},function(i){e=i.cclegacy,s=i._decorator,o=i.isValid,a=i.find},function(i){n=i.resourceUtil},function(i){h=i.poolManager},function(i){r=i.tips}],execute:function(){var p,c,l;e._RF.push({},"ae98dhzQlZL2p1SbDgvNdoJ","uiManager",void 0);const{ccclass:u,property:d}=s;i("uiManager",u("uiManager")((l=c=class i{constructor(){t(this,"dictSharedPanel",{}),t(this,"dictLoading",{}),t(this,"arrPopupDialog",[]),t(this,"showTipsTime",0)}static get instance(){return this._instance||(this._instance=new i),this._instance}showDialog(i,t,e){if(this.dictLoading[i])return;let s=i.lastIndexOf("/"),h=i.slice(s+1);if(t||(t=[]),this.dictSharedPanel.hasOwnProperty(i)){let s=this.dictSharedPanel[i];if(o(s)){s.parent=a("Canvas"),s.active=!0;let i=s.getComponent(h);return i.show&&i.show.apply(i,t),void(e&&e(i))}}this.dictLoading[i]=!0,n.createUI(i,((s,o)=>{let a=!1;if(this.dictLoading[i]||(a=!0),this.dictLoading[i]=!1,s)return void console.error(s);this.dictSharedPanel[i]=o;let n=o.getComponent(h);n.show&&n.show.apply(n,t),e&&e(n),a&&this.hideDialog(i)}))}hideDialog(i,t){if(this.dictSharedPanel.hasOwnProperty(i)){let e=this.dictSharedPanel[i];e&&o(e)?(e.parent=null,t&&"function"==typeof t&&t()):t&&"function"==typeof t&&t()}this.dictLoading[i]=!1}pushToPopupSeq(i,t,e){let s={panelPath:i,scriptName:t,param:e,isShow:!1};this.arrPopupDialog.push(s),this.checkPopupSeq()}insertToPopupSeq(i,t,e){let s={panelPath:t,param:e,isShow:!1};this.arrPopupDialog.splice(i,0,s)}shiftFromPopupSeq(i){this.hideDialog(i,(()=>{this.arrPopupDialog[0]&&this.arrPopupDialog[0].panelPath===i&&(this.arrPopupDialog.shift(),this.checkPopupSeq())}))}checkPopupSeq(){if(this.arrPopupDialog.length>0){let i=this.arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this.arrPopupDialog[0].isShow=!0)}}showTips(i,t){var e=Date.now();if(e-this.showTipsTime<800){var s=800-(e-this.showTipsTime);const o=this;setTimeout(function(i,t){o._showTipsAni(i,t)}.bind(this,i,t),s),this.showTipsTime=e+s}else this._showTipsAni(i,t),this.showTipsTime=e}_showTipsAni(i,t){n.getUIPrefabRes("common/tips",((e,s)=>{if(e)return;h.instance.getNode(s,a("Canvas")).getComponent(r).show(i,t)}))}},t(c,"_instance",void 0),p=l))||p);e._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var t,a,s,r,i,o,n,c,l,d,u;return{setters:[function(e){t=e.cclegacy,a=e.resources,s=e.error,r=e.Prefab,i=e.instantiate,o=e.find,n=e.SpriteFrame,c=e.isValid,l=e.assetManager,d=e.Texture2D,u=e._decorator}],execute:function(){var g;t._RF.push({},"aebeeEGJRZGbK315QTzsoll","resourceUtil",void 0);const{ccclass:f}=u;e("resourceUtil",f("resourceUtil")(g=class{static loadRes(e,t,r){t?a.load(e,t,((e,t)=>{if(e)return s(e.message||e),void(r&&r(e,t));r&&r(e,t)})):a.load(e,((e,t)=>{if(e)return s(e.message||e),void(r&&r(e,t));r&&r(e,t)}))}static getMap(e,t){let a="map";a+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes(`gamePackage/map/config/${a}`,null,((e,a)=>{if(e)return void t(e,a);const s=a;let r="";if(s._file){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(s._file));const e=JSON.parse(r);t(null,e)}else if(s.text){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(s.text));const e=JSON.parse(r);t(null,e)}else if(s.json)t(null,s.json);else{const e=new Error("failed");t(e,null)}}))}static getMapObjs(e,t,s,i){let o=[];for(let a=0;a<t.length;a++)o.push(`gamePackage/map/${e}/${t[a]}`);a.load(o,r,s,i)}static getUIPrefabRes(e,t){this.loadRes("prefab/ui/"+e,r,t)}static createUI(e,t,a){this.getUIPrefabRes(e,((e,s)=>{if(e)return;const r=i(s);r.setPosition(0,0,0),a||(a=o("Canvas")),a.addChild(r),t&&t(null,r)}))}static getCarsBatch(e,t,s){let i=[];for(let t=0;t<e.length;t++)i.push(`prefab/car/car${e[t]}`);for(let e=0;e<i.length;e++){const o=i[e];t?a.load(o,r,t,s):a.load(o,r,s)}}static getUICar(e,t){this.loadRes(`prefab/ui/car/uiCar${e}`,r,t)}static getCar(e,t){this.loadRes(`prefab/car/car${e}`,r,t)}static setCarIcon(e,t,a,s){let r=`gamePackage/texture/car/car${e}`;a&&(r+="Black"),this.setSpriteFrame(r,t,s)}static getJsonData(e,t){a.load("datas/"+e,((e,a)=>{if(e)return void s(e.message||e);const r=a;if(r.json)t(e,r.json);else{const e=new Error("failed!!!");t(e,null)}}))}static getData(e,t){a.load("datas/"+e,(function(e,r){if(e)return void s(e.message||e);let i=r.text;i?t(e,i):a.load(r.nativeUrl,((e,a)=>{i=a,t(e,i)}))}))}static setSpriteFrame(e,t,a){this.loadRes(e+"/spriteFrame",n,((s,r)=>{if(s)return console.error("set sprite frame failed! err:",e,s),void a(s,r);t&&c(t)&&(t.spriteFrame=r,a(null,r))}))}static setRemoteImage(e,t,a){if(!e||!e.startsWith("http"))return;l.loadAny([{url:e,type:"png"}],null,((t,s)=>{if(t)return console.error("set avatar failed! err:",e,t),void a(t,s);let r=new d;r.image=s;let i=new n;i.texture=r,a&&a(null,i)}))}static setGameIcon(e,t,a){e.startsWith("http")?this.setRemoteImage(e,t,a):this.setSpriteFrame("gamePackage/textures/icons/games/"+e,t,a)}static getCustomer(e,t){this.loadRes(`gamePackage/map/customer/customer${e}`,r,t)}static setCustomerIcon(e,t,a){let s=`gamePackage/texture/head/head${e}`;this.setSpriteFrame(s,t,a)}static getEffect(e,t){this.loadRes(`prefab/effect/${e}`,r,t)}})||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/balance.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./audioManager.ts","./constant.ts","./util.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts","./LanguageData.ts"],(function(e){"use strict";var i,t,n,r,l,s,a,o,u,c,h,p,g,b,f,m,d,v,y;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,n=e.defineProperty},function(e){r=e.cclegacy,l=e.Sprite,s=e.Label,a=e.Widget,o=e.Node,u=e.SpriteFrame,c=e._decorator,h=e.Component},function(e){p=e.clientEvent},function(e){g=e.audioManager},function(e){b=e.constant},function(e){f=e.util},function(e){m=e.playerData},function(e){d=e.uiManager},function(e){v=e.gameLogic},function(e){y=e.i18n}],execute:function(){var w,L,F,M,C,z,N,A,E,P,D,S,T,I,_,B,G,R,U,O,k,x,H,W,Y,j,q,V,X,Z,$,J,K,Q,ee;r._RF.push({},"b6b06mpFMlIZqLpxXisU3Cu","balance",void 0);const{ccclass:ie,property:te}=c;e("balance",(w=ie("balance"),L=te(l),F=te(l),M=te({type:s}),C=te({type:s}),z=te(a),N=te({type:o,displayName:"进度项"}),A=te(u),E=te(u),P=te(u),D=te(u),S=te(u),T=te(s),I=te(s),_=te(s),B=te(l),G=te(o),w((O=i((U=class extends h{constructor(...e){super(...e),t(this,"spStart",O,this),t(this,"spEnd",k,this),t(this,"lbCurLevel",x,this),t(this,"lbTargetLevel",H,this),t(this,"wgMenu",W,this),t(this,"progress",Y,this),t(this,"imgLevelFinished",j,this),t(this,"imgLevelUnfinished",q,this),t(this,"imgProgressNoActive",V,this),t(this,"imgProgressActive",X,this),t(this,"imgProgressFinished",Z,this),t(this,"lbTakeCount",$,this),t(this,"lbGetNormal",J,this),t(this,"lbGetMulti",K,this),t(this,"spIcon",Q,this),t(this,"nodeDouble",ee,this),n(this,"rewardMoney",0),n(this,"isFinishLevel",!1),n(this,"showBalanceTimes",0)}start(){}show(e,i,t,n,r,s){this.showBalanceTimes++;let a=t?i:i-1;const o=this.progress.length;for(let e=0;e<n&&!(n>=o);e++)this.progress[e].active=!0,this.progress[e].getComponent(l).spriteFrame=e<a?this.imgProgressFinished:this.imgProgressNoActive;t||(this.progress[a].getComponent(l).spriteFrame=this.imgProgressActive);for(let e=n;e<this.progress.length;e++)this.progress[e].active=!1;this.lbCurLevel.string=e.toString(),this.lbTargetLevel.string=`${e+1}`,this.isFinishLevel=s,this.spStart.spriteFrame=this.imgLevelFinished,this.spEnd.spriteFrame=s?this.imgLevelFinished:this.imgLevelUnfinished;let u=a>=0?a:0;this.lbTakeCount.string=y.t("balance.你完成了%{value}个订单",{value:u}),this.rewardMoney=r,this.lbGetNormal.string=f.formatMoney(r),this.lbGetMulti.string=f.formatMoney(3*r),s&&g.instance.playSound(b.AUDIO_SOUND.WIN),v.updateRewardIcon(b.SHARE_FUNCTION.BALANCE,this.spIcon);let c=Math.floor(100*Math.random());this.nodeDouble.active=c<30}onBtnGetNormalClick(){this.rewardOver(this.rewardMoney)}onBtnGetMultiClick(){v.openReward(b.SHARE_FUNCTION.BALANCE,(e=>{e||this.rewardOver(3*this.rewardMoney)}))}rewardOver(e){this.isFinishLevel?(v.finishBuyTask(b.BUY_CAR_TYPE.PASS_LEVEL,m.instance.playerInfo.level,!1),m.instance.passLevel(e)):m.instance.updatePlayerInfo("gold",e),e>0&&v.showFlyReward(b.REWARD_TYPE.GOLD,(()=>{p.dispatchEvent("updateGold")})),d.instance.hideDialog("fight/balance"),m.instance.playerInfo.level,m.instance.isComeFromBalance=!1,p.dispatchEvent("newLevel",this.isFinishLevel)}}).prototype,"spStart",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(U.prototype,"spEnd",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(U.prototype,"lbCurLevel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(U.prototype,"lbTargetLevel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(U.prototype,"wgMenu",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(U.prototype,"progress",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),j=i(U.prototype,"imgLevelFinished",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(U.prototype,"imgLevelUnfinished",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(U.prototype,"imgProgressNoActive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(U.prototype,"imgProgressActive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(U.prototype,"imgProgressFinished",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(U.prototype,"lbTakeCount",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(U.prototype,"lbGetNormal",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(U.prototype,"lbGetMulti",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(U.prototype,"spIcon",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i(U.prototype,"nodeDouble",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=U))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./configuration.ts","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./playerData.ts","./uiManager.ts","./flyReward.ts"],(function(e){"use strict";var t,n,a,i,s,c,r,o,u,d;return{setters:[function(e){t=e.defineProperty},function(e){n=e.cclegacy,a=e._decorator},function(e){i=e.configuration},function(e){s=e.clientEvent},function(e){c=e.resourceUtil},function(e){r=e.constant},function(e){o=e.playerData},function(e){u=e.uiManager},function(e){d=e.flyReward}],execute:function(){var l,g,p;n._RF.push({},"b6eeddtwEdPDYszSPn2rVjb","gameLogic",void 0);const{ccclass:f}=a;e("gameLogic",f("gameLogic")((p=g=class{static addGold(e){o.instance.updatePlayerInfo("gold",e),s.dispatchEvent("updateGold")}static useCar(e){o.instance.useCar(e),s.dispatchEvent("updateCar")}static buyCar(e){o.instance.buyCar(e),s.dispatchEvent("buyCar")}static isVibrateOpen(){let e=i.instance.getGlobalData("vibrate");return null==e&&(e=!0),e}static getOpenRewardType(e,t,n){t(null,r.OPEN_REWARD_TYPE.NULL)}static checkIsByVideoAds(){return!1}static updateRewardIcon(e,t,n,a,i){this.getOpenRewardType(e,((e,s)=>{switch(s){case r.OPEN_REWARD_TYPE.AD:t.node.active=!0,t.spriteFrame=a||this.imgAd;break;case r.OPEN_REWARD_TYPE.SHARE:t.node.active=!0,t.spriteFrame=i||this.imgShare;break;case r.OPEN_REWARD_TYPE.NULL:t.node.active=!1}n&&n(e,s)}))}static finishBuyTask(e,t,n){o.instance.finishBuyTask(e,t,n),s.dispatchEvent("updateBuyTask")}static openReward(e,t){t&&t(null)}static afterLogin(){o.instance.isNewBee||this.checkSignIn()}static checkSignIn(){1!==o.instance.playerInfo.level&&(o.instance.updateSignInCurrentDay(),o.instance.getSignInReceivedInfo().isTodayReceived||u.instance.pushToPopupSeq("signIn/signIn","signIn",{}))}static showFlyReward(e,t){c.createUI("common/flyReward",((e,n)=>{if(e)return void(t&&t());n.getComponent(d).setEndListener(t)}))}},t(g,"imgAd",null),t(g,"imgShare",null),l=p))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/en.ts",["cc"],(function(){"use strict";var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"c2ee7NzXEdG1Z3CXlfjoO8M","en",void 0),window.i18nConfig||(window.i18nConfig={}),window.i18nConfig.languages||(window.i18nConfig.languages={}),window.i18nConfig.languages.en={main:{dataLoading:"Data loading...",dataLoadOver:"Data loading completed...",loginSuccess:"Login success...",gameResourceLoading:"Game Resource Loading...",audioResourceLoading:"Audio Resource Loading...",mappingResourceLoading:"Mapping resource loading...",modelResourceLoading:"Model resource loading...",entering:"Entering..."},mainUI:{start:"Click screen to start",changeCar:"Change cars"},shop:{btnClose:"Close",go:"Go",acquired:"Acquired",current:"Current",receive:"Receive",getGold:"Gold coins for watching AD"},balance:{"你完成了%{value}个订单":"Complete %{value} order",youEarnedIt:"You earned it",clickReceive:"Click revive",receiveImmediately:"Receive Now"},carTask:{"初始车辆":"Initial vehicle","分享获得":"Share gain","签到获得":"Signin gain","通过关卡获得":"Get through a checkpoint"},signin:{title:"Sign in on the 7th",notYet:"Not yet",normalReceive:"Normal receive",receive:"Receive",doubleReceive:"Double receive",fillSignin:"Fill signin"},fightManager:{loadingMap:"Loading map...",buildingCity:"Start building cities...",cityLoadOver:"City loaded..."},fightMap:{trimTheGround:"The ground is being trimmed...",pavingTheRoad:"Paving the way...",plantingTree:"The trees are being planted...",decorateHouse:"The house is being renovated...",paintLandmarks:"The landmark is being painted..."},online:{close:"Close",clickReceive:"Click receive",dailyIncome:"Daily income is available"},lottery:{title:"Wheel of fortune",free:"Free"},talk:{"你好,请到街对面接我.":"Hello, please meet me across the street.","停车!停车!":"Stop the car, please! Stop the car, please!","去消费最高的地方.":"Go to the place where you spend the most.","去附近的希尔顿酒店.":"Go to the nearby hilton hotel.","司机快来!我老婆要生了!":"Driver, come on!  My wife is having a baby!","大哥快点,我赶时间.":"Eldest brother hurry up, I'm in a hurry.","师傅,5分钟内能到吗?":"Master, can you be there in 5 minutes?","师傅,你是老司机嘛?":"Master, are you an old driver?","师傅,你跑一天能赚多少?":"Master, how much do you earn per day?","师傅快点,我要赶飞机.":"Master, hurry up, I have to catch the plane.","师傅跟上那辆法拉利.":"Master, keep up with that Ferrari.","带我去最近的银行.":"Take me to the nearest bank.","帮我跟上前面那辆车!":"Help me keep up with the car in front!","快去火车站,我赶车!":"Go to the railway station, I'll catch the bus!","我在酒店大堂门口等你.":"I'll wait for you at the gate of the hotel lobby.","要下雨了,你快来!":"It's going to rain, you come quickly!"},showReward:{title:"Reward",normalReceive:"Normal receive",ReceiveImmediately:" Receive Now",doubleReceive:"Double receive",alreadyHadCar:"You already own the vehicle and automatically convert it into the corresponding gold coin.",buySuccessful:"Buy successful",confrim:"Confrim",signinReward:"Signin reward"},revive:{reviveImmediately:"Resurrection Now",skip:"Skip",tips:"It's a pity that we came close to the finish line.!",continue:"Resurrection continues."},clickBox:{title:"Mysterious gift",progress:"The faster you click, the more rewards you will receive.",clickMe:"click me fast",normalReceive:"Normal receive",doubleReceive:"Double receive"},trial:{title:"Free trial",tryItNow:"Try It Now",giveUp:"Give up the trial and start the game."},invinceible:{title:"Invincible start",confirm:"Confrim",close:"Close"},setting:{title:"Setting",version:"Version:",close:"Close"}},e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){"use strict";var e,a,i,o,r,l,n,s,d,c;return{setters:[function(t){e=t.defineProperty,a=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){o=t.cclegacy,r=t._decorator,l=t.Component,n=t.log,s=t.Label,d=t.error},function(t){c=t.i18n}],execute:function(){var u,p,h,b,D;o._RF.push({},"c4c1axXN+NL4oYQEr2M4qn2","LocalizedLabel",void 0);const{ccclass:L,property:I}=r;t("default",L("LocalizedLabel")((D=b=class extends l{constructor(...t){super(...t),e(this,"_debouncedUpdateLabel",null),e(this,"label",null),i(this,"_dataID",h,this)}set dataID(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}get dataID(){return this._dataID}onLoad(){c.inst||c.init(),n("dataID: "+this.dataID+" value: "+c.t(this.dataID)),this.fetchRender()}fetchRender(){let t=this.getComponent(s);if(t)return this.label=t,void this.updateLabel()}updateLabel(){if(!this.label)return void d("Failed to update localized label, label component is invalid!");c.t(this.dataID,{})&&(this.label.string=c.t(this.dataID,{}))}debounce(t,e,a){let i=-1;return(()=>{const o=arguments,r=(()=>{i=-1,a||t.apply(this,o)}).bind(this),l=a&&!i;clearTimeout(i),i=setTimeout(r,e),l&&t.apply(this,o)}).bind(this)}},e(b,"editor",{executeInEditMode:!0,menu:"i18n/LocalizedLabel"}),h=a((p=D).prototype,"_dataID",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a(p.prototype,"dataID",[I],Object.getOwnPropertyDescriptor(p.prototype,"dataID"),p.prototype),u=p))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/main.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./configuration.ts","./localConfig.ts","./playerData.ts","./LanguageData.ts","./loading.ts"],(function(i){"use strict";var s,e,r,o,n,t,a,c,u,g,d,l,h,P;return{setters:[function(i){s=i.applyDecoratedDescriptor,e=i.initializerDefineProperty,r=i.defineProperty},function(i){o=i.cclegacy,n=i.Label,t=i._decorator,a=i.Component,c=i.assetManager,u=i.director},function(i){g=i.configuration},function(i){d=i.localConfig},function(i){l=i.playerData},function(i){h=i.i18n},function(i){P=i.loading}],execute:function(){var p,f,m,b,L,I,S;o._RF.push({},"c5aa7IsWr5A4blPeFPanXM/","main",void 0);const{ccclass:y,property:U}=t;h.init("zh");i("main",(p=y("main"),f=U(n),m=U(P),p((I=s((L=class extends a{constructor(...i){super(...i),e(this,"lbVersion",I,this),e(this,"loadingUI",S,this),r(this,"retryTimes",0),r(this,"uid",""),r(this,"curProgress",0),r(this,"isLoginFinished",!1),r(this,"isSubPackageFinished",!1),r(this,"isConfigLoaded",!1)}start(){this.loadingUI.show(),l.instance.syncServerTime(Date.now()),this.curProgress=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.dataLoading")),d.instance.loadConfig((()=>{this.lbVersion.string=`Version. ${d.instance.getVersion()}`,this.isConfigLoaded=!0,this.loadMainScene()})),this.curProgress+=5,this.loadingUI&&this.loadingUI.updateProgress(this.curProgress,h.t("main.dataLoadOver")),this.curProgress+=5,this.curProgress+=15,this.loadingUI.updateProgress(this.curProgress,h.t("main.gameResourceLoading")),l.instance.loadGlobalCache(),l.instance.userId?this.uid=l.instance.userId:this.uid=g.generateGuestAccount(),this.startLogin(),this.downloadGameRes((()=>{console.log("subpackage download finished!"),this.isSubPackageFinished=!0,this.loadMainScene()}))}startLogin(){g.instance.setUserId(this.uid),l.instance.syncServerTime(Date.now()),this.userLogin()}userLogin(){l.instance.loadFromCache(),void 0===l.instance.playerInfo.createDate&&l.instance.createPlayerInfo(),console.log("login finished!"),this.isLoginFinished=!0,this.loadMainScene()}downloadGameRes(i){this.curProgress+=15,this.loadingUI.updateProgress(this.curProgress),i&&i()}showSubPackageError(){}loadGameSubPackage(i){this.loadingUI.updateProgress(this.curProgress,h.t("main.audioResourceLoading")),c.loadBundle("resources",(s=>{if(this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.audioResourceLoading")),s)return this.showSubPackageError(),console.error(s);c.loadBundle("textures",(s=>{if(this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.mappingResourceLoading")),s)return this.showSubPackageError(),console.error(s);c.loadBundle("model",(s=>{if(this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.modelResourceLoading")),s)return this.showSubPackageError(),console.error(s);i&&i()}))}))}))}loadMainScene(){this.isConfigLoaded&&this.isLoginFinished&&this.isSubPackageFinished&&u.preloadScene("main",(i=>{this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.entering")),i||u.loadScene("main",(function(){}))}))}}).prototype,"lbVersion",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=s(L.prototype,"loadingUI",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=L))||b));o._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./audioManager.ts","./constant.ts","./poolManager.ts","./carManager.ts"],(function(e){"use strict";var n,t,r,i,a,o,s,c,l,u,d,h;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,r=e.defineProperty},function(e){i=e.cclegacy,a=e.Prefab,o=e._decorator,s=e.Component},function(e){c=e.clientEvent},function(e){l=e.audioManager},function(e){u=e.constant},function(e){d=e.poolManager},function(e){h=e.carManager}],execute:function(){var g,f,p,M,N,y,k;i._RF.push({},"cf371ivOc1Ae64t3ScAzqjv","effectManager",void 0);const{ccclass:B,property:b}=o;e("effectManager",(g=B("effectManager"),f=b({type:a}),p=b({type:h}),g((y=n((N=class extends s{constructor(...e){super(...e),t(this,"pfTailLine",y,this),t(this,"carManager",k,this),r(this,"currentNode",null)}start(){}onEnable(){c.on("startBraking",this.onBrakingStart,this),c.on("endBraking",this.onBrakingEnd,this)}onDisable(){c.off("startBraking",this.onBrakingStart,this),c.off("endBraking",this.onBrakingEnd,this)}onBrakingStart(){this.currentNode=d.instance.getNode(this.pfTailLine,this.node),this.currentNode.setWorldPosition(this.carManager.mainCar.node.worldPosition),this.currentNode.eulerAngles=this.carManager.mainCar.node.eulerAngles,l.instance.playSound(u.AUDIO_SOUND.STOP)}onBrakingEnd(){let e=this.currentNode;this.currentNode=null,this.scheduleOnce((()=>{e&&e.isValid&&d.instance.putNode(e)}),2)}update(e){this.currentNode&&this.carManager.mainCar&&(this.currentNode.setWorldPosition(this.carManager.mainCar.node.worldPosition),this.currentNode.eulerAngles=this.carManager.mainCar.node.eulerAngles)}reset(){if(this.currentNode){d.instance.putNode(this.currentNode),d.instance.clearPool(this.currentNode.name),this.currentNode=null;let e=this.node.children.slice(0);for(let n=0;n<e.length;n++){let t=e[n];t&&t.isValid&&t.destroy()}}}}).prototype,"pfTailLine",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(N.prototype,"carManager",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=N))||M));i._RF.pop()}}}));

System.register("chunks:///_virtual/flyReward.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./flyRewardItem.ts"],(function(e){"use strict";var t,i,r,n,a,o,s,l,c,d,h,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.defineProperty},function(e){n=e.cclegacy,a=e.SpriteFrame,o=e.Node,s=e.Animation,l=e._decorator,c=e.Component,d=e.find,h=e.Vec3},function(e){u=e.clientEvent},function(e){f=e.flyRewardItem}],execute:function(){var p,m,y,w,v,b,R,g,_;n._RF.push({},"d14d4EewSBFtIn6B/rRUvjM","flyReward",void 0);const{ccclass:P,property:I}=l;e("flyReward",(p=P("flyReward"),m=I(a),y=I(o),w=I(s),p((R=t((b=class extends c{constructor(...e){super(...e),i(this,"imgGold",R,this),i(this,"ndRewardParent",g,this),i(this,"aniBoom",_,this),r(this,"finishIdx",0),r(this,"_callback",void 0),r(this,"isGoldOrDiamond",!0)}start(){this.aniBoom.play(),this.createReward()}getTargetPos(){let e=d("Canvas/goldPos");return e?e.position:(this.node.destroy(),this._callback&&this._callback(),h.ZERO)}createReward(){let e=this.imgGold,t=this.getTargetPos();for(var i=0;i<10;i++){let i=new o("flyRewardItem"),r=i.addComponent(f);i.parent=this.ndRewardParent,r.show(e,t,(e=>{this.onFlyOver(e)}))}}setInfo(e){this.isGoldOrDiamond=e}onFlyOver(e){this.isGoldOrDiamond?u.dispatchEvent("receiveGold"):u.dispatchEvent("receiveDiamond"),e.active=!1,this.finishIdx++,10===this.finishIdx&&(this._callback&&this._callback(),this.node.destroy())}setEndListener(e){this._callback=e}}).prototype,"imgGold",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"ndRewardParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(b.prototype,"aniBoom",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));n._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./polyglot.min.ts"],(function(e){"use strict";var n,t,i,o;return{setters:[function(e){n=e.defineProperty},function(e){t=e.cclegacy,i=e.director},function(e){o=e.Polyglot}],execute:function(){let r;function l(e){return window.i18nConfig.languages[e]}function a(e){e&&(r?r.replace(e):r=new o({phrases:e,allowMissing:!0}))}t._RF.push({},"d6597NeRz5OuZ6kceJkHWc3","LanguageData",void 0),window.i18nConfig||(window.i18nConfig={languages:{},curLang:""});class c{static init(e){if(!e||e===window.i18nConfig.curLang)return;let n=l(e)||{};window.i18nConfig.curLang=e,a(n),this.inst=r}static t(e,n){if(0===Object.keys(r.phrases).length){a(l(window.i18nConfig.curLang)||{}),console.warn("###防止出现parses数据丢失，重新替换数据")}if(r)return r.t(e,n)}updateSceneRenderers(){let e=i.getScene().children,n=[];for(let t=0;t<e.length;++t){let i=e[t].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,i)}for(let e=0;e<n.length;++e){let t=n[e];t.node.active&&t.updateLabel()}let t=[];for(let n=0;n<e.length;++n){let i=e[n].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(t,i)}for(let e=0;e<t.length;++e){let n=t[e];n.node.active&&n.updateSprite(window.i18nConfig.curLang)}}}e("i18n",c),n(c,"inst",null),t._RF.pop()}}}));

System.register("chunks:///_virtual/lottery.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./configuration.ts","./clientEvent.ts","./constant.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts","./lodash.ts","./lotteryItem.ts"],(function(t){"use strict";var e,n,i,r,a,o,l,s,u,h,c,b,d,p,y,f,g,m,w,B,R,C,E,I,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty,i=t.defineProperty},function(t){r=t.cclegacy,a=t.Node,o=t.Prefab,l=t.Button,s=t.Label,u=t.SpriteFrame,h=t.Sprite,c=t._decorator,b=t.Component,d=t.instantiate,p=t.Color,y=t.Vec3,f=t.tween},function(t){g=t.configuration},function(t){m=t.clientEvent},function(t){w=t.constant},function(t){B=t.localConfig},function(t){R=t.playerData},function(t){C=t.uiManager},function(t){E=t.gameLogic},function(t){I=t.lodash},function(t){L=t.lotteryItem}],execute:function(){var D,T,A,v,M,z,_,O,N,Y,F,P,k,G,V,x,S,U,H,j,q,J,W,Z,$,K,Q,X,tt;r._RF.push({},"d7ed7RMvvZIvbdJyWwfIGDy","lottery",void 0);const{ccclass:et,property:nt}=c;t("lottery",(D=et("lottery"),T=nt(a),A=nt(o),v=nt(a),M=nt(a),z=nt(l),_=nt(l),O=nt(s),N=nt(u),Y=nt(u),F=nt(u),P=nt(h),k=nt(h),G=nt(h),D((S=e((x=class extends b{constructor(...t){super(...t),n(this,"arrRewardNode",S,this),n(this,"pfRewardItem",U,this),n(this,"nodeTurnable",H,this),n(this,"ndBtnClose",j,this),n(this,"btnLottery",q,this),n(this,"btnAd",J,this),n(this,"lbMoney",W,this),n(this,"imgLotteryBtnDisable",Z,this),n(this,"imgLotteryBtnEnable",$,this),n(this,"imgAdBtnEnable",K,this),n(this,"spLotteryBtn",Q,this),n(this,"spAdIcon",X,this),n(this,"spAdBtn",tt,this),i(this,"arrRewardData",[]),i(this,"arrLotteryItem",[]),i(this,"arrProbability",[]),i(this,"randValue",0),i(this,"curRotation",null),i(this,"_receiveCarTimes",0)}set receiveCarTimes(t){console.log("#####receiveCarTimes",t),this._receiveCarTimes=t}get receiveCarTimes(){return this._receiveCarTimes}start(){}onEnable(){m.on("buyCar",this.onBuyCar,this)}onDisable(){m.off("buyCar",this.onBuyCar,this)}onBuyCar(){this.initReward()}show(){this.initReward(),this.initInfo(),this.btnAd.node.active=!0}initReward(){let t=B.instance.getCars(),e=[];if(t.forEach((t=>{R.instance.hasCar(t.ID)||t.type!==w.BUY_CAR_TYPE.GOLD||e.push(t.ID)})),e.length<6){let t=I.cloneDeep(R.instance.playerInfo.cars);for(;e.length<6;){let n=Math.floor(Math.random()*t.length),i=t[n];B.instance.queryByID("car",i).type===w.BUY_CAR_TYPE.GOLD&&e.push(t.splice(n,1)[0])}}this.arrRewardData=e,this.arrProbability=[];let n=0;for(let t=0;t<this.arrRewardNode.length;t++){let e=this.arrRewardNode[t],i=this.arrLotteryItem[t];if(i||(i=d(this.pfRewardItem),i.parent=e,this.arrLotteryItem[t]=i),this.arrRewardData.length>t){let e=this.arrRewardData[t];i.getComponent(L).show(e);let r=n,a=n+100/6;this.arrProbability.push({min:r,max:a,idx:t}),n=a}}}initInfo(){this.lbMoney.string=""+w.LOTTERY.MONEY,this.checkButton()}checkButton(){const t=this.checkIsFree();this.btnAd.node.active=t,this.btnLottery.node.active=!t,t||(R.instance.playerInfo.gold>w.LOTTERY.MONEY?(this.lbMoney.color=new p(163,64,27),this.lotteryBtnEnable=!0,this.adBtnEnable=!1):(this.lbMoney.color=p.RED,this.lotteryBtnEnable=!1,this.adBtnEnable=!0),E.updateRewardIcon(w.SHARE_FUNCTION.LOTTERY,this.spAdIcon,(()=>{})))}checkIsFree(){const t=R.instance.playerInfo.signInInfo.currentDay,e=g.instance.getGlobalData("rewardDays");return void 0===e||parseInt(e)<t}set lotteryBtnEnable(t){t?(this.btnLottery.interactable=!0,this.spLotteryBtn.spriteFrame=this.imgLotteryBtnEnable):(this.btnLottery.interactable=!1,this.spLotteryBtn.spriteFrame=this.imgLotteryBtnDisable)}set adBtnEnable(t){t?(this.btnAd.interactable=!0,this.spAdBtn.spriteFrame=this.imgAdBtnEnable):(this.btnAd.interactable=!1,this.spAdBtn.spriteFrame=this.imgLotteryBtnDisable)}getRandValue(){let t=-1;for(;-1===t;){let e=Math.floor(100*Math.random());for(let n=0;n<this.arrProbability.length;n++){let i=this.arrProbability[n];if(e>=i.min&&e<i.max){t=i.idx;break}}}return t}onBtnStartClick(){E.addGold(-w.LOTTERY.MONEY),this.startRun()}onBtnAdClick(){const t=g.instance.getGlobalData("rewardDays");g.instance.setGlobalData("rewardDays",`${t?parseInt(t)+1:0}`),E.openReward(w.SHARE_FUNCTION.LOTTERY,(t=>{t||this.startRun()}))}startRun(){this.lotteryBtnEnable=!1,this.adBtnEnable=!1,this.ndBtnClose.getComponent(l).interactable=!1,this.randValue=this.getRandValue();let t=this.nodeTurnable.eulerAngles.z%360;this.nodeTurnable.eulerAngles=new y(0,0,t);let e=360-t,n=3+Math.floor(4*Math.random()),i=-360-360*n+60*this.randValue+30-360;this.curRotation=this.nodeTurnable.eulerAngles.clone(),f(this.curRotation).to(e/360+.5*n,new y(0,0,i),{easing:"cubicOut"}).call((()=>{this.curRotation=null,this.showReward()})).start()}showReward(){this.ndBtnClose.getComponent(l).interactable=!0,this.arrLotteryItem[this.randValue].getComponent(L).showReward(this),this.checkButton()}onBtnCloseClick(){C.instance.hideDialog("lottery/lottery")}update(t){this.curRotation&&(this.nodeTurnable.eulerAngles=this.curRotation)}}).prototype,"arrRewardNode",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=e(x.prototype,"pfRewardItem",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(x.prototype,"nodeTurnable",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(x.prototype,"ndBtnClose",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(x.prototype,"btnLottery",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(x.prototype,"btnAd",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(x.prototype,"lbMoney",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(x.prototype,"imgLotteryBtnDisable",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(x.prototype,"imgLotteryBtnEnable",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(x.prototype,"imgAdBtnEnable",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(x.prototype,"spLotteryBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(x.prototype,"spAdIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(x.prototype,"spAdBtn",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=x))||V));r._RF.pop()}}}));

System.register("chunks:///_virtual/fightCanvas.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./carManager.ts","./gameLogic.ts","./loading.ts"],(function(i){"use strict";var t,e,n,o,s,r,a,h,u,c,g,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty,n=i.defineProperty},function(i){o=i.cclegacy,s=i.SpriteFrame,r=i._decorator,a=i.Component,h=i.Node},function(i){u=i.clientEvent},function(i){c=i.carManager},function(i){g=i.gameLogic},function(i){l=i.loading}],execute:function(){var d,p,f,T,m,v,b,y,L,P,C;o._RF.push({},"daea1EBoy1Ms6PBdAupQWnn","fightCanvas",void 0);const{ccclass:E,property:w}=r;i("fightCanvas",(d=E("fightCanvas"),p=w(c),f=w(s),T=w(s),m=w(l),d((y=t((b=class extends a{constructor(...i){super(...i),e(this,"carManager",y,this),e(this,"imgShare",L,this),e(this,"imgVideo",P,this),e(this,"loadingUI",C,this),n(this,"curProgress",50),n(this,"isFirstLoad",!0),n(this,"isTouching",!1)}start(){g.imgAd=this.imgVideo,g.imgShare=this.imgShare,this.loadingUI.show(this.curProgress),this.node.on(h.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(h.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(h.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onEnable(){u.on("updateLoading",this.updateLoadingProgress,this),u.on("showGuide",this.showGuide,this)}onDisable(){u.off("updateLoading",this.updateLoadingProgress,this),u.off("showGuide",this.showGuide,this)}onTouchStart(){this.isTouching=!0,this.carManager.controlMainCar(!0)}onTouchEnd(){this.isTouching=!1,this.carManager.controlMainCar(!1)}showGuide(i){i&&this.isTouching&&this.scheduleOnce((()=>{this.onTouchStart()}),0)}updateLoadingProgress(i,t){this.isFirstLoad?this.curProgress+=Math.floor(i/2):this.curProgress+=i,this.loadingUI.updateProgress(this.curProgress,t)}loadNewLevel(){this.loadingUI.node.active=!0,this.curProgress=0,this.isFirstLoad=!1}finishLoading(){this.loadingUI.node.active=!1}}).prototype,"carManager",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(b.prototype,"imgShare",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(b.prototype,"imgVideo",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(b.prototype,"loadingUI",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/fightConstants.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var R,s;return{setters:[function(t){R=t.defineProperty},function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"dbe36y+LwBGGIL8I87F3O+/","fightConstants",void 0);class _{}t("fightConstants",_),R(_,"ROAD_POINT_TYPE",{NORMAL:1,START:2,GREETING:3,PLATFORM:4,END:5,AI_START:6}),R(_,"ROAD_MOVE_TYPE",{LINE:1,BEND:2}),R(_,"CAR_GROUP",{NORMAL:1,MAIN_CAR:2,OTHER_CAR:4}),R(_,"CUSTOMER_TALK_TIME",{INTO_THE_CAR:1,NEW_ORDER:2}),R(_,"CLICK_BOX_REWARD",300),s._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./configuration.ts","./resourceUtil.ts"],(function(e){"use strict";var o,t,n,i,u,s,a,c;return{setters:[function(e){o=e.defineProperty},function(e){t=e.cclegacy,n=e.assert,i=e.AudioClip,u=e.warn,s=e.clamp01},function(e){a=e.configuration},function(e){c=e.resourceUtil}],execute:function(){t._RF.push({},"e478cuMHJdIHa5fP3m5UZ7S","audioManager",void 0);class l{constructor(){o(this,"soundVolume",1)}static get instance(){return this._instance||(this._instance=new l),this._instance}init(e){this.soundVolume=this.getConfiguration(!1)?1:0,l._audioSource=e}getConfiguration(e){let o;return o=e?a.instance.getGlobalData("music"):a.instance.getGlobalData("sound"),void 0===o||"true"===o}playMusic(e){const o=l._audioSource;n(o,"AudioManager not inited!"),o.loop=e,o.playing||o.play()}playSound(e){const o=l._audioSource;n(o,"AudioManager not inited!");c.loadRes("gamePackage/audio/sound/"+e,i,((e,t)=>{e?u("load audioClip failed: ",e):o.playOneShot(t,o.volume?this.soundVolume/o.volume:0)}))}setMusicVolume(e){const o=l._audioSource;n(o,"AudioManager not inited!"),e=s(e),o.volume=e}setSoundVolume(e){this.soundVolume=e}openMusic(){this.setMusicVolume(.8),a.instance.setGlobalData("music","true")}closeMusic(){this.setMusicVolume(0),a.instance.setGlobalData("music","false")}openSound(){this.setSoundVolume(1),a.instance.setGlobalData("sound","true")}closeSound(){this.setSoundVolume(0),a.instance.setGlobalData("sound","false")}}e("audioManager",l),o(l,"_instance",void 0),o(l,"_audioSource",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/car.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./clientEvent.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts","./poolManager.ts"],(function(t){"use strict";var i,e,s,n,o,r,h,a,l,c,d,g,p,u,R,P,v,m,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.defineProperty,s=t.initializerDefineProperty},function(t){n=t.cclegacy,o=t.Node,r=t._decorator,h=t.Component,a=t.instantiate,l=t.Vec3,c=t.ParticleSystem,d=t.RigidBody,g=t.Collider,p=t.ERigidBodyType},function(t){u=t.fightConstants},function(t){R=t.clientEvent},function(t){P=t.resourceUtil},function(t){v=t.audioManager},function(t){m=t.constant},function(t){T=t.poolManager}],execute:function(){var S,C,y,_,w,M,A,O,b;n._RF.push({},"e6d4fVD3pxJ7Y1Khf8fRUoa","car",void 0);const{ccclass:f,property:I}=r;t("car",(S=f("car"),C=I({displayName:"最大移动速度"}),y=I({displayName:"最小移动速度"}),_=I(o),S((A=i((M=class extends h{set isMoving(t){this._isMoving=t,this.updateBackLight()}get isMoving(){return this._isMoving}set isHosting(t){this._isHosting=t,this.updateBackLight()}get isHosting(){return this._isHosting}set isInvincible(t){if(this._isInvincible=t,t){if(this.nodeInvincible)return void(this.nodeInvincible.active=!0);P.getEffect("shield",((t,i)=>{t?console.error(t):(this.nodeInvincible=a(i),this.nodeInvincible.parent=this.node)}))}else this.nodeInvincible&&(this.nodeInvincible.destroy(),this.nodeInvincible=null)}get isInvincible(){return this._isInvincible}constructor(){super(),e(this,"_isMoving",!1),s(this,"maxSpeed",A,this),s(this,"minSpeed",O,this),s(this,"nodeGas",b,this),e(this,"_minSpeed",-1),e(this,"_maxSpeed",-1),e(this,"manager",null),e(this,"isMain",!1),e(this,"currentSpeed",0),e(this,"accelerate",2),e(this,"originRotation",0),e(this,"targetRotation",0),e(this,"curRoadPoint",null),e(this,"circleCenterPoint",new l),e(this,"quarter",0),e(this,"_nodeGasInst",null),e(this,"entry",null),e(this,"forward",new l(0,0,-1)),e(this,"posTarget",new l),e(this,"posSrc",new l),e(this,"_callback",null),e(this,"isOver",!1),e(this,"curProgress",0),e(this,"maxProgress",0),e(this,"hasCustomer",!1),e(this,"lastPos",new l),e(this,"lastRotation",new l),e(this,"isBraking",!1),e(this,"arrTyres",[]),e(this,"curTyreRotation",0),e(this,"nodeCarBackLight",null),e(this,"tootingCoolTime",0),e(this,"isCarMoving",!1),e(this,"nodeInvincible",null),e(this,"_isHosting",!1),e(this,"_isInvincible",!1),e(this,"invincibleRotation",0)}start(){this._minSpeed=this.minSpeed,this._maxSpeed=this.maxSpeed;let t=this.node.getChildByPath("RootNode/tyre1");t&&(this.arrTyres=[t,this.node.getChildByPath("RootNode/tyre2"),this.node.getChildByPath("RootNode/tyre3"),this.node.getChildByPath("RootNode/tyre4")],this.nodeCarBackLight=this.node.getChildByPath("RootNode/light1")),P.getEffect("gas",((t,i)=>{if(t)return;const e=T.instance.getNode(i,this.nodeGas);this._nodeGasInst=e.getComponent(c),e.setPosition(new l(0,0,0))}))}markMainCar(t){this.isMain=t;let i=this.node.getComponent(d),e=this.node.getComponent(g);e.off("onCollisionEnter",this.onCollisionEnter,this),t?(i.setGroup(u.CAR_GROUP.MAIN_CAR),i.setMask(u.CAR_GROUP.OTHER_CAR),i.type=p.KINEMATIC,e.on("onCollisionEnter",this.onCollisionEnter,this)):(i.setGroup(u.CAR_GROUP.OTHER_CAR),i.setMask(-1),i.type=p.DYNAMIC)}setEntry(t){this.entry=t,this.reset()}onCollisionEnter(t){if(!this.isMain)return;if("ground"===t.otherCollider.node.name)return;let i=t.otherCollider.node;t.otherCollider.node===this.node&&(i=t.selfCollider.node);let e=i.getComponent("car");if(!e.isOver){e.isOver=!0;let t=i.getComponent(d);t.useGravity=!0,this.isInvincible?t.applyForce(new l(0,1e4,-3e3),new l(0,.5,0)):t.applyForce(new l(0,1500,-3e3),new l(0,.5,0))}if(this.isOver)return;v.instance.playSound(m.AUDIO_SOUND.CRASH);let s=this.node.getComponent(d);if(this.isInvincible)return this.lastPos=this.node.worldPosition,this.lastRotation=this.node.eulerAngles,s.enabled=!1,this.scheduleOnce((()=>{this.isInvincible=!1,s.enabled=!0,this.revive(),this.currentSpeed=this._minSpeed}),.1),void this.scheduleOnce((()=>{T.instance.putNode(i)}),.3);this.lastPos=this.node.worldPosition,this.lastRotation=this.node.eulerAngles,this.isOver=!0,s.setGroup(u.CAR_GROUP.MAIN_CAR),s.setMask(u.CAR_GROUP.OTHER_CAR|u.CAR_GROUP.NORMAL),R.dispatchEvent("gameOver",!1)}updateBackLight(){this.nodeCarBackLight&&(this.nodeCarBackLight.active=!this.isMoving||this.isHosting)}startRunning(){this.isOver||(this.isMoving=!0,this.accelerate=.4,this._nodeGasInst&&this._nodeGasInst.play(),this.isBraking&&(R.dispatchEvent("endBraking"),this.isBraking=!1))}startWithMinSpeed(){this.currentSpeed=this.minSpeed,this.stopRunning(!0),this._nodeGasInst&&this._nodeGasInst.play()}stopRunning(t){this.isOver||(this.isMoving=!1,this.accelerate=-.15,this.isBraking||t||(R.dispatchEvent("startBraking"),this.isBraking=!0))}stopImmediately(){this.isMoving=!1,this.currentSpeed=0}setMoveOverListener(t){this._callback=t}resetPhysical(){this.isOver=!1,this.isMain&&this.markMainCar(!0);let t=this.node.getComponent(d);t.useGravity=!1,t.sleep(),t.wakeUp()}revive(){this.resetPhysical(),console.log("revive pos ",this.lastPos);let t=new l(this.lastPos.x,0,this.lastPos.z);this.node.setWorldPosition(t),this.node.eulerAngles=this.lastRotation,this.isMoving=!1,this.currentSpeed=0}reset(){this.resetPhysical(),this.isMain&&(this.curProgress=0,this.hasCustomer=!1,this._nodeGasInst&&this._nodeGasInst.stop(),this.isInvincible=!1),this.tootingCoolTime=0,this.curRoadPoint=this.entry.getComponent("roadPoint"),this.posSrc.set(this.entry.worldPosition),this.posTarget.set(this.curRoadPoint.next.worldPosition),this.node.setWorldPosition(this.entry.worldPosition),this.posTarget.z!==this.posSrc.z?this.posTarget.z<this.posSrc.z?this.node.eulerAngles=new l(0,360,0):this.node.eulerAngles=new l(0,180,0):this.posTarget.x>this.posSrc.x?this.node.eulerAngles=new l(0,270,0):this.node.eulerAngles=new l(0,90,0),this.originRotation=this.node.eulerAngles.y,this.targetRotation=this.originRotation,this.isMoving=!1,this.isHosting=!1,this.currentSpeed=0,this._minSpeed>0&&(this.minSpeed=this._minSpeed,this.maxSpeed=this._maxSpeed)}greeting(){this.isHosting=!0,this.curProgress++,this.hasCustomer=!0,R.dispatchEvent("greetingCustomer"),this.manager.greeting(this.node.worldPosition,this.curRoadPoint.direction,(()=>{this.isMoving=!1,this.currentSpeed=0,this.isHosting=!1,R.dispatchEvent("showGuide",!0)}))}takeCustomer(){this.isHosting=!0,this.hasCustomer=!1,R.dispatchEvent("takeCustomer"),this.manager.takeCustomer(this.node.worldPosition,this.curRoadPoint.direction,this.curProgress===this.maxProgress,(()=>{this.isMoving=!1,this.currentSpeed=0,this.isHosting=!1,R.dispatchEvent("showGuide",!0)}))}arrivalPoint(){if(this.node.setWorldPosition(this.posTarget),this.curRoadPoint.moveType===u.ROAD_MOVE_TYPE.BEND&&(this.node.eulerAngles=new l(0,this.targetRotation,0)),this.posSrc.set(this.posTarget),this.posTarget.set(l.ZERO),this.curRoadPoint.next){if(this.curRoadPoint=this.curRoadPoint.next.getComponent("roadPoint"),this.isMain&&(this.curRoadPoint.type===u.ROAD_POINT_TYPE.GREETING?this.greeting():this.curRoadPoint.type===u.ROAD_POINT_TYPE.PLATFORM?this.takeCustomer():this.curRoadPoint.type===u.ROAD_POINT_TYPE.END&&(R.dispatchEvent("gameOver",!0),this.moveAfterFinished())),this.curRoadPoint.next?this.posTarget.set(this.curRoadPoint.next.worldPosition):this._callback&&this._callback(this),this.originRotation=this.node.eulerAngles.y,this.targetRotation=this.originRotation,this.curRoadPoint.moveType===u.ROAD_MOVE_TYPE.BEND){if(this.curRoadPoint.clockwise){this.originRotation=this.originRotation<=0?360+this.originRotation:this.originRotation,this.targetRotation=this.originRotation-90,this.posTarget.x>this.posSrc.x&&this.posTarget.z<this.posSrc.z||this.posTarget.x<this.posSrc.x&&this.posTarget.z>this.posSrc.z?this.circleCenterPoint=new l(this.posTarget.x,0,this.posSrc.z):this.circleCenterPoint=new l(this.posSrc.x,0,this.posTarget.z);let t=l.subtract(new l,this.circleCenterPoint,this.posSrc).length();this.quarter=90/(Math.PI*t/2)}else{this.originRotation=this.originRotation>=360?this.originRotation-360:this.originRotation,this.targetRotation=this.originRotation+90,this.posTarget.x>this.posSrc.x&&this.posTarget.z<this.posSrc.z||this.posTarget.x<this.posSrc.x&&this.posTarget.z>this.posSrc.z?this.circleCenterPoint=new l(this.posSrc.x,0,this.posTarget.z):this.circleCenterPoint=new l(this.posTarget.x,0,this.posSrc.z);let t=l.subtract(new l,this.circleCenterPoint,this.posSrc).length();this.quarter=90/(Math.PI*t/2)}this.node.eulerAngles=new l(0,this.originRotation,0)}}else this.curRoadPoint=null,this._callback&&this._callback(this)}update(t){if(this.nodeInvincible&&(this.invincibleRotation+=200*t,this.invincibleRotation>360&&(this.invincibleRotation-=360),this.nodeInvincible.eulerAngles=new l(this.invincibleRotation,0,0)),this.tootingCoolTime>0&&(this.tootingCoolTime=this.tootingCoolTime>t?this.tootingCoolTime-t:0),!this.isMoving&&this.currentSpeed<.01||this.posTarget.equals(l.ZERO)||this.isHosting||this.isOver)this.isCarMoving=!1;else{if(this.isCarMoving=!0,this.currentSpeed+=this.accelerate*t,this.currentSpeed=this.currentSpeed>this.maxSpeed?this.maxSpeed:this.currentSpeed,this.currentSpeed<this.minSpeed&&(this.currentSpeed=this.minSpeed,this.isBraking&&(R.dispatchEvent("endBraking"),this.isBraking=!1)),this.arrTyres.length>0){this.curTyreRotation-=200*this.currentSpeed,this.curTyreRotation<-360&&(this.curTyreRotation+=360);let t=new l(this.curTyreRotation,0);for(let i=0;i<this.arrTyres.length;i++){this.arrTyres[i].eulerAngles=t}}switch(this.curRoadPoint.moveType){case u.ROAD_MOVE_TYPE.LINE:let t=new l;l.subtract(t,this.posTarget,this.node.worldPosition),t.normalize(),l.multiplyScalar(t,t,this.currentSpeed);let i=this.node.worldPosition;t.add(i),this.posTarget.z!==this.posSrc.z?this.posTarget.z<this.posSrc.z?(this.node.eulerAngles=new l(0,360,0),t.z<this.posTarget.z&&(t.z=this.posTarget.z)):(this.node.eulerAngles=new l(0,180,0),t.z>this.posTarget.z&&(t.z=this.posTarget.z)):this.posTarget.x>this.posSrc.x?(this.node.eulerAngles=new l(0,270,0),t.x>this.posTarget.x&&(t.x=this.posTarget.x)):(this.node.eulerAngles=new l(0,90,0),t.x<this.posTarget.x&&(t.x=this.posTarget.x)),this.node.setWorldPosition(t);break;case u.ROAD_MOVE_TYPE.BEND:let e=this.targetRotation-this.originRotation,s=this.node.eulerAngles.y<0?360+this.node.eulerAngles.y:this.node.eulerAngles.y;this.node.eulerAngles.y>360&&(s=this.node.eulerAngles.y-360);let n=e*Math.abs((s-this.originRotation)/e)+this.currentSpeed*this.quarter*(this.targetRotation>this.originRotation?1:-1);Math.abs(e)<Math.abs(n)&&(n=e);let o=this.originRotation+n,r=l.rotateY(new l,this.posSrc,this.circleCenterPoint,n*Math.PI/180);this.node.setWorldPosition(r),this.node.eulerAngles=new l(0,o,0)}l.subtract(new l,this.posTarget,this.node.worldPosition).lengthSqr()<.001&&this.arrivalPoint()}}moveAfterFinished(){this.isMoving=!0,this.minSpeed=.2,this.maxSpeed=.2,this.startRunning()}tooting(){if(this.tootingCoolTime>0)return;this.tootingCoolTime=5;let t=1===Math.floor(2*Math.random())?m.AUDIO_SOUND.TOOTING1:m.AUDIO_SOUND.TOOTING2;v.instance.playSound(t)}}).prototype,"maxSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),O=i(M.prototype,"minSpeed",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),b=i(M.prototype,"nodeGas",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=M))||w));n._RF.pop()}}}));

System.register("chunks:///_virtual/migrate-canvas.ts",["cc"],(function(){"use strict";var e,t,n,i,o,r;return{setters:[function(c){e=c.cclegacy,t=c.director,n=c.Director,i=c.Canvas,o=c.Camera,r=c.game}],execute:function(){e._RF.push({},"e88543KyK5I1IU1Sy8u4Lzm","migrate-canvas",void 0);const c=1048575;function a(e,t){for(let n=0,i=e.children.length;n<i;n++)e.children[n].layer=t,a(e.children[n],t)}t.on(n.EVENT_AFTER_SCENE_LAUNCH,(()=>{var e,n,l;const s=null===(e=t.getScene())||void 0===e?void 0:e.children;let m=null===(n=t.getScene())||void 0===n?void 0:n.getComponentsInChildren(i);if(m.length<=1)return;m=m.filter((e=>!!e.cameraComponent));let p=null===(l=t.getScene())||void 0===l?void 0:l.getComponentsInChildren(o),d=0;p.forEach((e=>d|=e.visibility&c));const u=[];for(let e=0,t=s.length;e<t;e++){const t=s[e];if(!r.isPersistRootNode(t))continue;const n=t.getComponentsInChildren(i);0!==n.length&&u.push(...n.filter((e=>!!e.cameraComponent)))}u.forEach((e=>{if(m.find((t=>t!==e&&t.cameraComponent.visibility&e.cameraComponent.visibility&c))){const t=~d,n=t&~(t-1);e.cameraComponent.visibility=n|4293918720&e.cameraComponent.visibility,a(e.node,n),d|=t}}))}));let l=cc.Node.prototype.setParent;function s(e){let t=null,n=e.getComponent(i);return n&&n.cameraComponent?(t=n.cameraComponent.visibility&n.node.layer?n.node.layer:n.cameraComponent.visibility&~(n.cameraComponent.visibility-1),t):(e.parent&&(t=s(e.parent)),t)}cc.Node.prototype.setParent=function(e,t){if(l.call(this,e,t),!e)return;let n=s(this);n&&(this.layer=n,a(this,n))},e._RF.pop()}}}));

System.register("chunks:///_virtual/invincible.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./constant.ts","./poolManager.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./gameLogic.ts"],(function(n){"use strict";var t,e,i,r,o,c,a,l,s,u,p,h,g,f,C,b,d;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty,i=n.defineProperty},function(n){r=n.cclegacy,o=n.Node,c=n.Widget,a=n.Sprite,l=n._decorator,s=n.Component},function(n){u=n.clientEvent},function(n){p=n.resourceUtil},function(n){h=n.constant},function(n){g=n.poolManager},function(n){f=n.localConfig},function(n){C=n.playerData},function(n){b=n.uiManager},function(n){d=n.gameLogic}],execute:function(){var I,v,y,m,N,_,w,k,B;r._RF.push({},"ec04bogempOHrQhVVHVqSZV","invincible",void 0);const{ccclass:D,property:E}=l;n("invincible",(I=D("invincible"),v=E(o),y=E(c),m=E(a),I((w=t((_=class extends s{constructor(...n){super(...n),e(this,"nodeCarParent",w,this),e(this,"wgMenu",k,this),e(this,"spIcon",B,this),i(this,"_callback",void 0),i(this,"currentCar",null)}start(){}show(n){this._callback=n,d.updateRewardIcon(h.SHARE_FUNCTION.INVINCIBLE,this.spIcon,((n,t)=>{})),this.currentCar&&(g.instance.putNode(this.currentCar),this.currentCar=null);let t=f.instance.queryByID("car",C.instance.showCar.toString());p.getUICar(t.model,((n,e)=>{n?console.error(n,t.model):this.currentCar=g.instance.getNode(e,this.nodeCarParent)}))}onBtnCloseClick(){b.instance.hideDialog("main/invincible"),this._callback&&this._callback()}onBtnOKClick(){d.openReward(h.SHARE_FUNCTION.INVINCIBLE,((n,t)=>{n||(u.dispatchEvent("showInvincible"),this.onBtnCloseClick())}))}}).prototype,"nodeCarParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(_.prototype,"wgMenu",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(_.prototype,"spIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=_))||N));r._RF.pop()}}}));

System.register("chunks:///_virtual/btnAdapter.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){"use strict";var t,i,n,r,o,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Button,o=e._decorator,c=e.Component},function(e){a=e.audioManager}],execute:function(){var l,s,u,p,d,b,h,f,m,y,k,S,v;n._RF.push({},"f130br9GwZGkJEkRGonhXxR","btnAdapter",void 0);const{ccclass:g,property:P,menu:C,requireComponent:w,disallowMultiple:z}=o;e("btnAdapter",(l=g("btnAdapter"),s=C("自定义组件/btnAdapter"),u=w(r),p=P({tooltip:"点击后是否播放点击音效"}),d=P({tooltip:"点击音效名"}),b=P({tooltip:"是否禁止快速二次点击"}),h=P({tooltip:"点击后多久才能再次点击,仅isPreventSecondClick为true生效"}),l(f=s(f=u(f=z((y=t((m=class extends c{constructor(...e){super(...e),i(this,"isPlaySound",y,this),i(this,"clickSoundName",k,this),i(this,"isPreventSecondClick",S,this),i(this,"preventTime",v,this)}start(){const e=this.node.getComponent(r);this.node.on("click",(()=>{this.isPreventSecondClick&&(e.interactable=!1,this.scheduleOnce((()=>{e.node&&(e.interactable=!0)}),this.preventTime)),this.isPlaySound&&a.instance.playSound(this.clickSoundName,!1)}))}}).prototype,"isPlaySound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=t(m.prototype,"clickSoundName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),S=t(m.prototype,"isPreventSecondClick",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=t(m.prototype,"preventTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=m))||f)||f)||f)||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){var n;e._RF.push({},"f1bcdp9t1BPdo0rL87xRyba","util",void 0);const{ccclass:o,property:a}=r;t("util",o("util")(n=class{static clone(t){if(null===t||"object"!=typeof t)return t;let e={};t.constructor===Array&&(e=[]);for(const r in t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r]));return e}static objectToArray(t){const e=[];for(let r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}static arrayToObject(t,e){const r={};for(let n in t)t.hasOwnProperty(n)&&t[n][e]&&(r[t[n][e]]=t[n]);return r}static getWeightRandIndex(t,e){const r=Math.floor(Math.random()*e);let n=0,o=0;for(;o<t.length&&(n+=t[o],!(r<n));o++);return o}static getRandomNFromM(t,e){const r=[];let n=0,o=0;for(;o<e&&!(o>=t+1);){n=this.getRandomInt(0,t);let e=0;for(let t=0;t<o;t++)if(r[t]===n){e=1;break}0===e&&(r[o]=n,o++)}return r}static getRandomInt(t,e){const r=Math.random()*(e-t+1)+t;return Math.floor(r)}static getStringLength(t){const e=t;let r=0;for(let t=0,n=e.length;t<n;t++){r+=e.charCodeAt(t)<=255?1:2}return Math.ceil(r/2)}static isEmptyObject(t){let e=!0;if(t&&t.constructor===Object){for(const r in t)if(t.hasOwnProperty(r)){e=!1;break}}else e=!1;return e}static formatNum(t){if(t<=0)return"0";const e=Math.round(Math.log(t)/Math.log(1e3));return parseInt((t/Math.pow(1e3,e-1<0?0:e-1)).toString(),10)+["","","K","M","B"][e]}static isNewDay(t){const e=new Date(t),r=new Date,n=e.getFullYear(),o=e.getMonth(),a=e.getDate(),s=r.getFullYear(),c=r.getMonth(),i=r.getDate();return s>n||(c>o||i>a)}static getPropertyCount(t){let e,r=0;for(e in t)t.hasOwnProperty(e)&&r++;return r}static difference(t,e){const r=[];if(t.constructor!==Array||e.constructor!==Array)return r;const n=t.length;for(let o=0;o<n;o++)-1===e.indexOf(t[o])&&r.push(t[o]);return r}static simulationUUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static trim(t){return t.replace(/(^\s*)|(\s*$)/g,"")}static isNowValid(t,e){const r=new Date(t),n=new Date(e);let o=!1;if(r.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){const t=new Date;o=t<n&&t>r}return o}static getDeltaDays(t,e){const r=new Date(t),n=new Date(e),o=r.getFullYear(),a=r.getMonth()+1,s=r.getDate(),c=n.getFullYear(),i=n.getMonth()+1,l=n.getDate();t=new Date(o+"/"+a+"/"+s+" GMT+0800").getTime();const u=(e=new Date(c+"/"+i+"/"+l+" GMT+0800").getTime())-t;return Math.floor(u/864e5)}static getMin(t){let e=0;if(t.constructor===Array){const r=t.length;for(let n=0;n<r;n++)e=0===n?Number(t[0]):e>Number(t[n])?Number(t[n]):e}return e}static formatTwoDigits(t){return(Array(2).join("0")+t).slice(-2)}static formatDate(t,e){const r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(const t in r)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?`${r[t]}`:`00${r[t]}`.substr((""+r[t]).length)));return e}static getDay(){const t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}static formatMoney(t){const e=["","K","M","G","T","P","E","Z","Y","B","N","D"];let r="";for(let n=0;n<e.length;n++){if(!(t>=1e4)){r=Math.floor(t)+e[n];break}t/=1e3}return""===r&&(r=Math.floor(t)+"U"),r}static formatTimeForSecond(t){let e="";const r=t%60;let n=Math.floor(t/60);n=n<0?0:n;const o=Math.floor(n/60),a=n%60;return o>0&&(e+=o>9?o.toString():"0"+o,e+=":"),e+=a>9?a.toString():"0"+a,e+=":",e+=r>9?r.toString():"0"+r,e}static formatTimeForMillisecond(t){let e=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60),n=Math.floor(t/1e3/60/60);return`${e<10?"0"+e:e}:${r<10?"0"+r:r}:${n<10?"0"+n:n}`}static zip(t){const e=pako.gzip(encodeURIComponent(t),{to:"string"});return this.base64encode(e)}static rand(t){let e=this.clone(t);for(let t=e.length-1;t>=0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e}})||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/fightManager.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./clientEvent.ts","./resourceUtil.ts","./playerData.ts","./carManager.ts","./uiManager.ts","./LanguageData.ts","./fightMap.ts","./customerManager.ts","./effectManager.ts","./fightCanvas.ts"],(function(e){"use strict";var t,a,i,n,r,s,o,h,l,c,g,u,f,p,v,d,M,m,y,L;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty,i=e.defineProperty},function(e){n=e.cclegacy,r=e.Node,s=e._decorator,o=e.Component,h=e.Collider,l=e.instantiate},function(e){c=e.fightConstants},function(e){g=e.clientEvent},function(e){u=e.resourceUtil},function(e){f=e.playerData},function(e){p=e.carManager},function(e){v=e.uiManager},function(e){d=e.i18n},function(e){M=e.fightMap},function(e){m=e.customerManager},function(e){y=e.effectManager},function(e){L=e.fightCanvas}],execute:function(){var C,b,w,I,O,G,D,U,k,P,E,F,R,z,_;n._RF.push({},"f3d36qkNslPB4TIGcZlp8vd","fightManager",void 0);const{ccclass:N,property:S}=s;e("fightManager",(C=N("fightManager"),b=S(L),w=S({type:M}),I=S({type:m}),O=S({type:p}),G=S({type:y}),D=S({type:r,displayName:"地面"}),C((P=t((k=class extends o{constructor(...e){super(...e),a(this,"fightLoading",P,this),a(this,"mapManager",E,this),a(this,"customerManager",F,this),a(this,"carManager",R,this),a(this,"effectManager",z,this),a(this,"nodeGround",_,this),i(this,"isStart",!1),i(this,"isOver",!1),i(this,"isFinishedLevel",!1),i(this,"money",0),i(this,"curLevel",0),i(this,"hasRevive",!1)}start(){this.initGround(),this.loadMap((()=>{this.initCar(),this.loadCar()}))}onEnable(){g.on("startGame",this.startGame,this),g.on("takeCustomer",this.onTakeCustomer,this),g.on("gameOver",this.gameOver,this),g.on("newLevel",this.newLevel,this),g.on("updateCar",this.updateMainCar,this),g.on("revive",this.revive,this)}onDisable(){g.off("startGame",this.startGame,this),g.off("takeCustomer",this.onTakeCustomer,this),g.off("gameOver",this.gameOver,this),g.off("newLevel",this.newLevel,this),g.off("updateCar",this.updateMainCar,this),g.off("revive",this.revive,this)}initGround(){let e=this.nodeGround.getComponent(h);e.setGroup(c.CAR_GROUP.NORMAL),e.setMask(-1)}loadMap(e){let t=1;f.instance.playerInfo&&(console.log("###playerData.instance.playerInfo.realLevel;",f.instance.playerInfo.realLevel),t=f.instance.playerInfo.passCheckPoint?f.instance.playerInfo.realLevel||t:f.instance.playerInfo.level||t,console.log("###level",t)),this.curLevel=t,console.log(`load level ${this.curLevel}`);let a=this.curLevel>100?this.curLevel:this.curLevel+100;g.dispatchEvent("updateLoading",4,d.t("fightManager.loadingMap")),u.getMap(a,((t,a)=>{t?console.error(t):(g.dispatchEvent("updateLoading",10,d.t("fightManager.buildingCity")),this.mapManager.buildMap(a,(()=>{}),(()=>{g.dispatchEvent("updateLoading",6,d.t("fightManager.cityLoadOver")),e&&e()})))}))}initCar(){this.carManager.init(this.mapManager,this.customerManager)}reset(){this.carManager.reset(),this.customerManager.reset(),this.effectManager.reset(),this.isStart=!1,this.isOver=!1,this.isFinishedLevel=!1,this.money=0,this.hasRevive=!1,this.loadCar()}loadCar(){this.carManager.preloadAICar((()=>{this.fightLoading.finishLoading(),this.showMainUI()}))}startGame(){this.isStart||(this.isStart=!0,this.carManager.startGame(),this.showFightUI())}gameOver(e){this.isOver||(this.isFinishedLevel=e,this.isOver=!0,this.carManager.gameOver(),this.showBalanceUI())}onTakeCustomer(){let e=Math.floor(30+this.curLevel/2+Math.floor(10*Math.random()));this.money+=e,g.dispatchEvent("makeMoney",e),u.getEffect("coin",((e,t)=>{e&&console.error(e);let a=l(t);a.parent=this.node,this.carManager.mainCar&&a.setWorldPosition(this.carManager.mainCar.node.getWorldPosition()),this.scheduleOnce((()=>{a.destroy()}),2)}))}showMainUI(){v.instance.showDialog("main/mainUI")}showFightUI(){v.instance.hideDialog("main/mainUI"),v.instance.showDialog("fight/fightUI",[this])}showBalanceUI(){let e=this.carManager.getCurrentProgress();v.instance.showDialog("fight/balance",[f.instance.playerInfo.level,e.cur,e.isOver,this.mapManager.levelProgressCnt,this.money,this.isFinishedLevel])}newLevel(e){this.fightLoading.loadNewLevel(),v.instance.hideDialog("fight/fightUI"),this.hasRevive=!1,e?(this.mapManager.recycle(),this.loadMap((()=>{this.reset()}))):this.reset()}updateMainCar(){this.carManager.creatMainCar()}revive(){this.carManager.revive()}}).prototype,"fightLoading",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(k.prototype,"mapManager",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(k.prototype,"customerManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(k.prototype,"carManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(k.prototype,"effectManager",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(k.prototype,"nodeGround",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=k))||U));n._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["./_rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./LanguageData.ts"],(function(e){"use strict";var i,t,n,r,s,o,a,l,h,u,g,p,c,m,f,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty,n=e.defineProperty},function(e){r=e.cclegacy,s=e.Sprite,o=e.Label,a=e.Node,l=e.SpriteFrame,h=e.Animation,u=e._decorator,g=e.Component},function(e){p=e.clientEvent},function(e){c=e.resourceUtil},function(e){m=e.localConfig},function(e){f=e.playerData},function(e){d=e.i18n}],execute:function(){var b,w,y,v,M,C,T,k,G,z,F,L,P,S,E,I,U,A,D,N,H,O,_,R,$,B,x,V,j,Z,q,J,K,Q,W,X,Y,ee,ie,te,ne,re,se,oe,ae;r._RF.push({},"fb9b7V8bZND35IgNyATVMNv","fightUI",void 0);const{ccclass:le,property:he}=u;e("fightUI",(b=le("fightUI"),w=he(s),y=he(s),v=he({type:o}),M=he({type:o}),C=he({type:a,displayName:"进度项"}),T=he(a),k=he(o),G=he(o),z=he(s),F=he(l),L=he(l),P=he(l),S=he(l),E=he(l),I=he(h),U=he(a),A=he(s),D=he(l),N=he(l),H=he(l),O=he(l),b(($=i((R=class extends g{constructor(){super(),t(this,"spStart",$,this),t(this,"spEnd",B,this),t(this,"curLevel",x,this),t(this,"targetLevel",V,this),t(this,"progress",j,this),t(this,"nodeTalk",Z,this),t(this,"lbTalk",q,this),t(this,"lbMake",J,this),t(this,"spHead",K,this),t(this,"imgLevelFinished",Q,this),t(this,"imgLevelUnfinished",W,this),t(this,"imgProgressNoActive",X,this),t(this,"imgProgressActive",Y,this),t(this,"imgProgressFinished",ee,this),t(this,"aniMakeMoney",ie,this),t(this,"nodeGuide",te,this),n(this,"fightManager",null),n(this,"carManager",null),t(this,"spShowGuideTip",ne,this),t(this,"img01",re,this),t(this,"img02",se,this),t(this,"img01En",oe,this),t(this,"img02En",ae,this),n(this,"isShowGuide",!1),n(this,"showGuideTime",0)}start(){}onEnable(){p.on("greetingCustomer",this.updateCarProgress,this),p.on("takeCustomer",this.updateCarProgress,this),p.on("gameOver",this.updateCarProgress,this),p.on("showTalk",this.showCustomerTalk,this),p.on("makeMoney",this.onMakeMoney,this),p.on("showGuide",this.showGuide,this)}onDisable(){p.off("greetingCustomer",this.updateCarProgress,this),p.off("takeCustomer",this.updateCarProgress,this),p.off("gameOver",this.updateCarProgress,this),p.off("showTalk",this.showCustomerTalk,this),p.off("makeMoney",this.onMakeMoney,this),p.off("showGuide",this.showGuide,this)}onTouchStart(){this.nodeGuide.getComponent(h).stop(),this.nodeGuide.active=!1}show(e){this.fightManager=e,this.carManager=this.fightManager.carManager,this.refreshUI(),this.carManager.mainCar.isMoving||this.showGuide(!0)}showGuide(e){this.nodeGuide.active=e;let i=this.nodeGuide.getComponent(h);e?i.play():i.stop(),e?(this.isShowGuide=!0,this.showGuideTime=0,i.getState("showGuide").setTime(0)):(this.isShowGuide=!1,this.showGuideTime=0)}onBtnAgainClick(){p.dispatchEvent("newLevel",!1)}onBtnChangeCameraRotation(){this.carManager.changeCameraFollowRotation()}refreshUI(){let e=this.fightManager.mapManager.levelProgressCnt;for(let i=0;i<e;i++)this.progress[i].active=!0,this.progress[i].getComponent(s).spriteFrame=this.imgProgressNoActive;for(let i=e;i<this.progress.length;i++)this.progress[i].active=!1;let i=f.instance.playerInfo?f.instance.playerInfo.level:1;this.curLevel.string=`${i}`,this.targetLevel.string=`${i+1}`,this.spStart.spriteFrame=this.imgLevelFinished,this.spEnd.spriteFrame=this.imgLevelUnfinished}updateCarProgress(){let e=this.carManager.getCurrentProgress(),i=e.cur,t=e.isOver?i:i-1;for(let e=0;e<t;e++)this.progress[e].getComponent(s).spriteFrame=this.imgProgressFinished;e.isOver||(this.progress[t].getComponent(s).spriteFrame=this.imgProgressActive),this.fightManager.isFinishedLevel&&(this.spEnd.spriteFrame=this.imgLevelFinished)}showCustomerTalk(e,i){let t=m.instance.getTableArr("talk"),n=[];t.forEach((e=>{e.type===i&&n.push(e)}));let r=Math.floor(Math.random()*n.length),s=n[r];this.lbTalk.string=d.t(`talk.${s.content}`),c.setCustomerIcon(e,this.spHead,(()=>{})),this.nodeTalk.active=!0,this.nodeTalk.getComponent(h).play(),this.scheduleOnce((()=>{this.nodeTalk.active=!1}),4)}onMakeMoney(e){this.aniMakeMoney.node.active=!0,this.lbMake.string=`+${e}`,this.aniMakeMoney.play(),this.aniMakeMoney.once(h.EventType.FINISHED,(()=>{this.aniMakeMoney.node.active=!1}),this)}update(e){this.isShowGuide&&(0===Math.floor(this.showGuideTime)&&("zh"===window.i18nConfig.curLang?this.spShowGuideTip.spriteFrame=this.img01:"en"===window.i18nConfig.curLang&&(this.spShowGuideTip.spriteFrame=this.img01En)),this.showGuideTime+=e,1===Math.floor(this.showGuideTime)?"zh"===window.i18nConfig.curLang?this.spShowGuideTip.spriteFrame=this.img02:"en"===window.i18nConfig.curLang&&(this.spShowGuideTip.spriteFrame=this.img02En):2===Math.floor(this.showGuideTime)&&("zh"===window.i18nConfig.curLang?this.spShowGuideTip.spriteFrame=this.img01:"en"===window.i18nConfig.curLang&&(this.spShowGuideTip.spriteFrame=this.img01En),this.showGuideTime=0))}}).prototype,"spStart",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(R.prototype,"spEnd",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(R.prototype,"curLevel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(R.prototype,"targetLevel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(R.prototype,"progress",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=i(R.prototype,"nodeTalk",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(R.prototype,"lbTalk",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(R.prototype,"lbMake",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(R.prototype,"spHead",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(R.prototype,"imgLevelFinished",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(R.prototype,"imgLevelUnfinished",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(R.prototype,"imgProgressNoActive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i(R.prototype,"imgProgressActive",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i(R.prototype,"imgProgressFinished",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i(R.prototype,"aniMakeMoney",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=i(R.prototype,"nodeGuide",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=i(R.prototype,"spShowGuideTip",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=i(R.prototype,"img01",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=i(R.prototype,"img02",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=i(R.prototype,"img01En",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=i(R.prototype,"img02En",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=R))||_));r._RF.pop()}}}));

System.register("chunks:///_virtual/follow.ts",["./_rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,i,l,s,r,n,a;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty,i=t.defineProperty},function(t){l=t.cclegacy,s=t.Node,r=t._decorator,n=t.Vec3,a=t.Component}],execute:function(){var f,w,h,u,c,d,g;l._RF.push({},"ff8ee6OQldPNLrgLpXROotm","follow",void 0);const{ccclass:p,property:y}=r;t("follow",(f=p("follow"),w=y({type:s}),f((c=o((u=class extends a{constructor(){super(),e(this,"followTarget",c,this),e(this,"isFollowRotation",d,this),e(this,"offset",g,this),i(this,"moveSpeed",3),i(this,"isPlayingStart",!1)}start(){}showStart(){}lateUpdate(t){if(!this.followTarget)return;let o=this.node.worldPosition;if(this.isPlayingStart){let e=new n(this.followTarget.worldPosition.x+this.offset.x,this.followTarget.worldPosition.y+this.offset.y,this.followTarget.worldPosition.z+this.offset.z);n.subtract(new n,o,e).length()>.001&&n.lerp(e,o,e,this.moveSpeed*t),this.node.setWorldPosition(e),this.node.lookAt(this.followTarget.worldPosition,new n(0,1,0))}else{let t=this.offset;this.isFollowRotation&&(t=n.transformQuat(new n,this.offset,this.followTarget.rotation));let o=new n(this.followTarget.worldPosition.x+t.x,this.followTarget.worldPosition.y+t.y,this.followTarget.worldPosition.z+t.z);if(this.node.setWorldPosition(o),this.node.lookAt(this.followTarget.worldPosition,new n(0,1,0)),this.isFollowRotation){let t=new n(this.node.eulerAngles);t.y=this.followTarget.eulerAngles.y,this.node.eulerAngles=t}}}}).prototype,"followTarget",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=o(u.prototype,"isFollowRotation",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=o(u.prototype,"offset",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),h=u))||h));l._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./configuration.ts","./fightConstants.ts","./oneToMultiListener.ts","./clientEvent.ts","./resourceUtil.ts","./audioManager.ts","./constant.ts","./poolManager.ts","./car.ts","./follow.ts","./roadPoint.ts","./util.ts","./csvManager.ts","./localConfig.ts","./playerData.ts","./carManager.ts","./eventListener.ts","./tips.ts","./uiManager.ts","./shopItem.ts","./shopPage.ts","./flyRewardItem.ts","./flyReward.ts","./gameLogic.ts","./polyglot.min.ts","./LanguageData.ts","./shop.ts","./fightMap.ts","./SpriteFrameSet.ts","./LocalizedSprite.ts","./online.ts","./zh.ts","./updateValueLabel.ts","./setting.ts","./customerManager.ts","./onlineDouble.ts","./trial.ts","./mainUI.ts","./showReward.ts","./clickBox.ts","./signInItem.ts","./lodash.ts","./lotteryItem.ts","./revive.ts","./blockInputEvent.ts","./GameRoot.ts","./loading.ts","./signIn.ts","./balance.ts","./en.ts","./LocalizedLabel.ts","./main.ts","./effectManager.ts","./lottery.ts","./fightCanvas.ts","./migrate-canvas.ts","./invincible.ts","./btnAdapter.ts","./fightManager.ts","./fightUI.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});